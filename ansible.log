2025-09-09 06:56:34,685 p=1700635 u=root n=ansible | [WARNING]: Collection community.general does not support Ansible version 2.12.10

2025-09-09 06:56:34,691 p=1700635 u=root n=ansible | [WARNING]: Collection ansible.posix does not support Ansible version 2.12.10

2025-09-09 06:56:34,765 p=1700635 u=root n=ansible | PLAY [masters:new_managers:workers:ingress] ************************************************************************************************************************************************************
2025-09-09 06:56:34,779 p=1700635 u=root n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************************************************************
2025-09-09 06:56:36,858 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:37,025 p=1700635 u=root n=ansible | ok: [rke2-worker1]
2025-09-09 06:56:37,050 p=1700635 u=root n=ansible | ok: [rke2-worker2]
2025-09-09 06:56:37,052 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:37,178 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:39,191 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:39,278 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:39,302 p=1700635 u=root n=ansible | TASK [create_disk : Gather facts to access ansible_devices] ********************************************************************************************************************************************
2025-09-09 06:56:39,344 p=1700635 u=root n=ansible | skipping: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:39,362 p=1700635 u=root n=ansible | skipping: [rke2-manager2]
2025-09-09 06:56:39,384 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:39,403 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:39,421 p=1700635 u=root n=ansible | skipping: [rke2-worker3]
2025-09-09 06:56:39,422 p=1700635 u=root n=ansible | skipping: [rke2-ingress01]
2025-09-09 06:56:39,438 p=1700635 u=root n=ansible | skipping: [rke2-ingress02]
2025-09-09 06:56:39,450 p=1700635 u=root n=ansible | TASK [create_disk : Get root device] *******************************************************************************************************************************************************************
2025-09-09 06:56:39,941 p=1700635 u=root n=ansible | changed: [rke2-worker1]
2025-09-09 06:56:39,962 p=1700635 u=root n=ansible | changed: [rke2-worker2]
2025-09-09 06:56:39,962 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:39,963 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:39,963 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:40,292 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:40,313 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:40,330 p=1700635 u=root n=ansible | TASK [create_disk : Extract root block device name] ****************************************************************************************************************************************************
2025-09-09 06:56:40,393 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:40,412 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:40,430 p=1700635 u=root n=ansible | ok: [rke2-worker1]
2025-09-09 06:56:40,449 p=1700635 u=root n=ansible | ok: [rke2-worker2]
2025-09-09 06:56:40,455 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:40,470 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:40,490 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:40,503 p=1700635 u=root n=ansible | TASK [create_disk : Find usable disk with shell command] ***********************************************************************************************************************************************
2025-09-09 06:56:40,848 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:40,887 p=1700635 u=root n=ansible | ok: [rke2-worker1]
2025-09-09 06:56:40,922 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:40,924 p=1700635 u=root n=ansible | ok: [rke2-worker2]
2025-09-09 06:56:40,927 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:41,167 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:41,195 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:41,207 p=1700635 u=root n=ansible | TASK [create_disk : Set usable disk] *******************************************************************************************************************************************************************
2025-09-09 06:56:41,248 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:41,268 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:41,286 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:41,306 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:41,324 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:41,331 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:41,349 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:41,362 p=1700635 u=root n=ansible | TASK [create_disk : Skip LVM setup if no usable disk found] ********************************************************************************************************************************************
2025-09-09 06:56:41,384 p=1700635 u=root n=ansible | skipping: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:41,402 p=1700635 u=root n=ansible | skipping: [rke2-manager2]
2025-09-09 06:56:41,457 p=1700635 u=root n=ansible | skipping: [rke2-worker3]
2025-09-09 06:56:41,476 p=1700635 u=root n=ansible | skipping: [rke2-ingress01]
2025-09-09 06:56:41,477 p=1700635 u=root n=ansible | ok: [rke2-worker1] => {
    "msg": "No additional disk found, skipping LVM setup"
}
2025-09-09 06:56:41,485 p=1700635 u=root n=ansible | skipping: [rke2-ingress02]
2025-09-09 06:56:41,496 p=1700635 u=root n=ansible | ok: [rke2-worker2] => {
    "msg": "No additional disk found, skipping LVM setup"
}
2025-09-09 06:56:41,508 p=1700635 u=root n=ansible | TASK [create_disk : Show selected disk] ****************************************************************************************************************************************************************
2025-09-09 06:56:41,600 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "msg": "Selected disk: /dev/sdb"
}
2025-09-09 06:56:41,618 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Selected disk: /dev/sdb"
}
2025-09-09 06:56:41,635 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:41,657 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:41,684 p=1700635 u=root n=ansible | ok: [rke2-worker3] => {
    "msg": "Selected disk: /dev/sdb"
}
2025-09-09 06:56:41,688 p=1700635 u=root n=ansible | ok: [rke2-ingress01] => {
    "msg": "Selected disk: /dev/sdb"
}
2025-09-09 06:56:41,712 p=1700635 u=root n=ansible | ok: [rke2-ingress02] => {
    "msg": "Selected disk: /dev/sdb"
}
2025-09-09 06:56:41,724 p=1700635 u=root n=ansible | TASK [create_disk : Partition disk with parted] ********************************************************************************************************************************************************
2025-09-09 06:56:41,782 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:41,821 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:42,414 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:42,416 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:42,421 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:42,432 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:42,451 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:42,463 p=1700635 u=root n=ansible | TASK [create_disk : Set partition path] ****************************************************************************************************************************************************************
2025-09-09 06:56:42,505 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:42,527 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:42,546 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:42,567 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:42,586 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:42,598 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:42,619 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:42,634 p=1700635 u=root n=ansible | TASK [create_disk : Create physical volume] ************************************************************************************************************************************************************
2025-09-09 06:56:42,696 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:42,714 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:42,990 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:42,995 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:43,049 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:43,058 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:43,064 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:43,076 p=1700635 u=root n=ansible | TASK [create_disk : Create volume group] ***************************************************************************************************************************************************************
2025-09-09 06:56:43,143 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:43,163 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:43,520 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:43,592 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:43,608 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:43,622 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:43,640 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:43,654 p=1700635 u=root n=ansible | TASK [create_disk : Create logical volume] *************************************************************************************************************************************************************
2025-09-09 06:56:43,715 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:43,734 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:44,138 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:44,152 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:44,179 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:44,190 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:44,192 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:44,208 p=1700635 u=root n=ansible | TASK [create_disk : Format logical volume as xfs] ******************************************************************************************************************************************************
2025-09-09 06:56:44,270 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:44,290 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:44,831 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:44,833 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:44,852 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:44,885 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:47,513 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:47,525 p=1700635 u=root n=ansible | TASK [create_disk : Ensure mount point /var/lib/rancher exists] ****************************************************************************************************************************************
2025-09-09 06:56:48,053 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/lib/rancher",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 06:56:48,054 p=1700635 u=root n=ansible | changed: [rke2-worker2]
2025-09-09 06:56:48,080 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/lib/rancher",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 06:56:48,081 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:48,082 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/lib/rancher",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 06:56:48,084 p=1700635 u=root n=ansible | changed: [rke2-worker1]
2025-09-09 06:56:48,085 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/lib/rancher",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 06:56:48,085 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:48,086 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/lib/rancher",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 06:56:48,086 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:48,438 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/lib/rancher",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 06:56:48,438 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:48,439 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/lib/rancher",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 06:56:48,440 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:48,450 p=1700635 u=root n=ansible | TASK [create_disk : Get UUID of logical volume] ********************************************************************************************************************************************************
2025-09-09 06:56:48,509 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:48,527 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:48,806 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:48,813 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:48,867 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:48,884 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:48,917 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:48,927 p=1700635 u=root n=ansible | TASK [create_disk : Add mount to /etc/fstab] ***********************************************************************************************************************************************************
2025-09-09 06:56:48,985 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:49,004 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:49,361 p=1700635 u=root n=ansible | [0;31m--- before: /etc/fstab (content)[0m
[0;31m[0m[0;32m+++ after: /etc/fstab (content)[0m
[0;32m[0m[0;36m@@ -9,3 +9,4 @@[0m
[0;36m[0m /dev/disk/by-id/dm-uuid-LVM-NDiFicJbJ0ZOkZYGqMvh8nvxgJiN6eMQre1N7oz0NLXrwMpU87q5q5TenIhgd4u1 / xfs defaults 0 1
 # /boot was on /dev/sda2 during curtin installation
 /dev/disk/by-uuid/94913d16-6095-4ade-977b-724999213551 /boot ext4 defaults 0 1
[0;32m+UUID=491e7078-0274-4674-865d-9a05359d6e5b /var/lib/rancher xfs defaults,noatime 0 0[0m
[0;32m[0m

2025-09-09 06:56:49,362 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:49,365 p=1700635 u=root n=ansible | [0;31m--- before: /etc/fstab (content)[0m
[0;31m[0m[0;32m+++ after: /etc/fstab (content)[0m
[0;32m[0m[0;36m@@ -9,3 +9,4 @@[0m
[0;36m[0m /dev/disk/by-id/dm-uuid-LVM-NDiFicJbJ0ZOkZYGqMvh8nvxgJiN6eMQre1N7oz0NLXrwMpU87q5q5TenIhgd4u1 / xfs defaults 0 1
 # /boot was on /dev/sda2 during curtin installation
 /dev/disk/by-uuid/94913d16-6095-4ade-977b-724999213551 /boot ext4 defaults 0 1
[0;32m+UUID=cf12dacb-031b-4daa-9a03-b28f5411049e /var/lib/rancher xfs defaults,noatime 0 0[0m
[0;32m[0m

2025-09-09 06:56:49,365 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:49,366 p=1700635 u=root n=ansible | [0;31m--- before: /etc/fstab (content)[0m
[0;31m[0m[0;32m+++ after: /etc/fstab (content)[0m
[0;32m[0m[0;36m@@ -9,3 +9,4 @@[0m
[0;36m[0m /dev/disk/by-id/dm-uuid-LVM-NDiFicJbJ0ZOkZYGqMvh8nvxgJiN6eMQre1N7oz0NLXrwMpU87q5q5TenIhgd4u1 / xfs defaults 0 1
 # /boot was on /dev/sda2 during curtin installation
 /dev/disk/by-uuid/94913d16-6095-4ade-977b-724999213551 /boot ext4 defaults 0 1
[0;32m+UUID=96f929e3-f544-4e29-9e3b-b2ce81ebb54b /var/lib/rancher xfs defaults,noatime 0 0[0m
[0;32m[0m

2025-09-09 06:56:49,367 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:49,377 p=1700635 u=root n=ansible | [0;31m--- before: /etc/fstab (content)[0m
[0;31m[0m[0;32m+++ after: /etc/fstab (content)[0m
[0;32m[0m[0;36m@@ -9,3 +9,4 @@[0m
[0;36m[0m /dev/disk/by-id/dm-uuid-LVM-NDiFicJbJ0ZOkZYGqMvh8nvxgJiN6eMQre1N7oz0NLXrwMpU87q5q5TenIhgd4u1 / xfs defaults 0 1
 # /boot was on /dev/sda2 during curtin installation
 /dev/disk/by-uuid/94913d16-6095-4ade-977b-724999213551 /boot ext4 defaults 0 1
[0;32m+UUID=2e94bf7e-af02-4a5a-82b9-d5d9a4902061 /var/lib/rancher xfs defaults,noatime 0 0[0m
[0;32m[0m

2025-09-09 06:56:49,377 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:49,392 p=1700635 u=root n=ansible | [0;31m--- before: /etc/fstab (content)[0m
[0;31m[0m[0;32m+++ after: /etc/fstab (content)[0m
[0;32m[0m[0;36m@@ -9,3 +9,4 @@[0m
[0;36m[0m /dev/disk/by-id/dm-uuid-LVM-NDiFicJbJ0ZOkZYGqMvh8nvxgJiN6eMQre1N7oz0NLXrwMpU87q5q5TenIhgd4u1 / xfs defaults 0 1
 # /boot was on /dev/sda2 during curtin installation
 /dev/disk/by-uuid/94913d16-6095-4ade-977b-724999213551 /boot ext4 defaults 0 1
[0;32m+UUID=829b83a0-1199-4dce-939a-f4bef3e1bc60 /var/lib/rancher xfs defaults,noatime 0 0[0m
[0;32m[0m

2025-09-09 06:56:49,392 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:49,408 p=1700635 u=root n=ansible | TASK [create_disk : Mount volume] **********************************************************************************************************************************************************************
2025-09-09 06:56:49,482 p=1700635 u=root n=ansible | skipping: [rke2-worker1]
2025-09-09 06:56:49,506 p=1700635 u=root n=ansible | skipping: [rke2-worker2]
2025-09-09 06:56:49,889 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:49,912 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:49,919 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:49,925 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:50,878 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:50,995 p=1700635 u=root n=ansible | PLAY [all,local] ***************************************************************************************************************************************************************************************
2025-09-09 06:56:51,031 p=1700635 u=root n=ansible | TASK [update_hosts_file : Get master node IP from inventory] *******************************************************************************************************************************************
2025-09-09 06:56:51,071 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:51,086 p=1700635 u=root n=ansible | TASK [update_hosts_file : Debug values] ****************************************************************************************************************************************************************
2025-09-09 06:56:51,126 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: cornelio.app.iac-svil.almaviva.it\n"
}
2025-09-09 06:56:51,145 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: rke2-manager2\n"
}
2025-09-09 06:56:51,168 p=1700635 u=root n=ansible | ok: [rke2-worker1] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: rke2-worker1\n"
}
2025-09-09 06:56:51,186 p=1700635 u=root n=ansible | ok: [rke2-worker2] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: rke2-worker2\n"
}
2025-09-09 06:56:51,204 p=1700635 u=root n=ansible | ok: [rke2-worker3] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: rke2-worker3\n"
}
2025-09-09 06:56:51,218 p=1700635 u=root n=ansible | ok: [rke2-ingress01] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: rke2-ingress01\n"
}
2025-09-09 06:56:51,232 p=1700635 u=root n=ansible | ok: [rke2-ingress02] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: rke2-ingress02\n"
}
2025-09-09 06:56:51,236 p=1700635 u=root n=ansible | ok: [localhost] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: localhost\n"
}
2025-09-09 06:56:51,258 p=1700635 u=root n=ansible | ok: [nginx] => {
    "msg": "Rancher Domain: rancher.asl.brindisi.it\nMaster IP: 10.116.82.131\nCurrent Host: nginx\n"
}
2025-09-09 06:56:51,270 p=1700635 u=root n=ansible | TASK [update_hosts_file : Remove old entries for rancher domain from /etc/hosts] ***********************************************************************************************************************
2025-09-09 06:56:51,630 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:51,659 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:51,674 p=1700635 u=root n=ansible | ok: [rke2-worker1]
2025-09-09 06:56:51,688 p=1700635 u=root n=ansible | ok: [rke2-worker2]
2025-09-09 06:56:51,691 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:51,924 p=1700635 u=root n=ansible | ok: [localhost]
2025-09-09 06:56:51,944 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:51,984 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:52,813 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 06:56:52,826 p=1700635 u=root n=ansible | TASK [update_hosts_file : Remove old entries by IP (cleanup any existing entries with the master IP)] **************************************************************************************************
2025-09-09 06:56:53,172 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -8,6 +8,5 @@[0m
[0;36m[0m ff02::2 ip6-allrouters
 
 10.116.82.130 ansible.rke
[0;31m-10.116.82.131 test.asl.taranto.it[0m
[0;31m[0m 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2


2025-09-09 06:56:53,173 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:53,216 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -8,6 +8,5 @@[0m
[0;36m[0m ff02::2 ip6-allrouters
 
 10.116.82.130 ansible.rke
[0;31m-10.116.82.131 test.asl.taranto.it[0m
[0;31m[0m 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2


2025-09-09 06:56:53,217 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:53,294 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -8,6 +8,5 @@[0m
[0;36m[0m ff02::2 ip6-allrouters
 
 10.116.82.130 ansible.rke
[0;31m-10.116.82.131 test.asl.taranto.it[0m
[0;31m[0m 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2


2025-09-09 06:56:53,297 p=1700635 u=root n=ansible | changed: [rke2-worker1]
2025-09-09 06:56:53,314 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -8,6 +8,5 @@[0m
[0;36m[0m ff02::2 ip6-allrouters
 
 10.116.82.130 ansible.rke
[0;31m-10.116.82.131 test.asl.taranto.it[0m
[0;31m[0m 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2


2025-09-09 06:56:53,315 p=1700635 u=root n=ansible | changed: [rke2-worker2]
2025-09-09 06:56:53,316 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -8,6 +8,5 @@[0m
[0;36m[0m ff02::2 ip6-allrouters
 
 10.116.82.130 ansible.rke
[0;31m-10.116.82.131 test.asl.taranto.it[0m
[0;31m[0m 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2


2025-09-09 06:56:53,316 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:53,527 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -8,6 +8,5 @@[0m
[0;36m[0m ff02::2 ip6-allrouters
 
 10.116.82.130 ansible.rke
[0;31m-10.116.82.131 test.asl.taranto.it[0m
[0;31m[0m 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2


2025-09-09 06:56:53,528 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:53,587 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -8,6 +8,5 @@[0m
[0;36m[0m ff02::2 ip6-allrouters
 
 10.116.82.130 ansible.rke
[0;31m-10.116.82.131 test.asl.taranto.it[0m
[0;31m[0m 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2


2025-09-09 06:56:53,588 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:53,613 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -13,4 +13,3 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;31m-10.116.82.131 ansible.app.iac-svil.almaviva.it[0m
[0;31m[0m

2025-09-09 06:56:53,613 p=1700635 u=root n=ansible | changed: [localhost]
2025-09-09 06:56:53,679 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -8,6 +8,5 @@[0m
[0;36m[0m ff02::2 ip6-allrouters
 
 10.116.82.130 ansible.rke
[0;31m-10.116.82.131 test.asl.taranto.it[0m
[0;31m[0m 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2


2025-09-09 06:56:53,679 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 06:56:53,692 p=1700635 u=root n=ansible | TASK [update_hosts_file : Add new entry for rancher domain in /etc/hosts] ******************************************************************************************************************************
2025-09-09 06:56:54,127 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -10,3 +10,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,127 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:54,195 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -10,3 +10,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,197 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 06:56:54,212 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -10,3 +10,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,212 p=1700635 u=root n=ansible | changed: [rke2-worker1]
2025-09-09 06:56:54,227 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -10,3 +10,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,227 p=1700635 u=root n=ansible | changed: [rke2-worker2]
2025-09-09 06:56:54,229 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -10,3 +10,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,230 p=1700635 u=root n=ansible | changed: [rke2-worker3]
2025-09-09 06:56:54,482 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -10,3 +10,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,482 p=1700635 u=root n=ansible | changed: [rke2-ingress01]
2025-09-09 06:56:54,488 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -13,3 +13,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,489 p=1700635 u=root n=ansible | changed: [localhost]
2025-09-09 06:56:54,499 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -10,3 +10,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,499 p=1700635 u=root n=ansible | changed: [rke2-ingress02]
2025-09-09 06:56:54,560 p=1700635 u=root n=ansible | [0;31m--- before: /etc/hosts (content)[0m
[0;31m[0m[0;32m+++ after: /etc/hosts (content)[0m
[0;32m[0m[0;36m@@ -10,3 +10,4 @@[0m
[0;36m[0m 10.116.82.130 ansible.rke
 10.116.82.132 rke2-worker1
 10.116.82.133 rke2-manager2
[0;32m+10.116.82.131 rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:56:54,560 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 06:56:54,577 p=1700635 u=root n=ansible | TASK [update_hosts_file : Verify /etc/hosts entry] *****************************************************************************************************************************************************
2025-09-09 06:56:54,892 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:54,947 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:54,973 p=1700635 u=root n=ansible | ok: [rke2-worker1]
2025-09-09 06:56:54,988 p=1700635 u=root n=ansible | ok: [rke2-worker2]
2025-09-09 06:56:54,989 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:55,182 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:55,194 p=1700635 u=root n=ansible | ok: [localhost]
2025-09-09 06:56:55,257 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:55,298 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 06:56:55,312 p=1700635 u=root n=ansible | TASK [update_hosts_file : Show hosts file verification] ************************************************************************************************************************************************
2025-09-09 06:56:55,361 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,384 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,406 p=1700635 u=root n=ansible | ok: [rke2-worker1] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,427 p=1700635 u=root n=ansible | ok: [rke2-worker2] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,447 p=1700635 u=root n=ansible | ok: [rke2-worker3] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,461 p=1700635 u=root n=ansible | ok: [rke2-ingress01] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,480 p=1700635 u=root n=ansible | ok: [rke2-ingress02] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,480 p=1700635 u=root n=ansible | ok: [localhost] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,504 p=1700635 u=root n=ansible | ok: [nginx] => {
    "msg": "Hosts file updated: True\nCurrent entry: 10.116.82.131 rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:55,517 p=1700635 u=root n=ansible | TASK [update_hosts_file : Test DNS resolution] *********************************************************************************************************************************************************
2025-09-09 06:56:55,944 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:55,976 p=1700635 u=root n=ansible | ok: [rke2-worker1]
2025-09-09 06:56:55,994 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:56,010 p=1700635 u=root n=ansible | ok: [rke2-worker2]
2025-09-09 06:56:56,011 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:56,255 p=1700635 u=root n=ansible | ok: [localhost]
2025-09-09 06:56:56,294 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:56,330 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:56,405 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 06:56:56,416 p=1700635 u=root n=ansible | TASK [update_hosts_file : Show DNS resolution test] ****************************************************************************************************************************************************
2025-09-09 06:56:56,475 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,493 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,512 p=1700635 u=root n=ansible | ok: [rke2-worker1] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,531 p=1700635 u=root n=ansible | ok: [rke2-worker2] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,547 p=1700635 u=root n=ansible | ok: [rke2-worker3] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,566 p=1700635 u=root n=ansible | ok: [rke2-ingress01] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,568 p=1700635 u=root n=ansible | ok: [rke2-ingress02] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,569 p=1700635 u=root n=ansible | ok: [localhost] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,589 p=1700635 u=root n=ansible | ok: [nginx] => {
    "msg": "DNS Resolution Test:\nServer:\t\t127.0.0.53\nAddress:\t127.0.0.53#53\n\nNon-authoritative answer:\nName:\trancher.asl.brindisi.it\nAddress: 10.116.82.131\n"
}
2025-09-09 06:56:56,603 p=1700635 u=root n=ansible | TASK [update_hosts_file : Test connectivity to rancher domain] *****************************************************************************************************************************************
2025-09-09 06:56:57,966 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 06:56:57,986 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:56:58,000 p=1700635 u=root n=ansible | ok: [rke2-worker2]
2025-09-09 06:56:58,041 p=1700635 u=root n=ansible | ok: [rke2-worker1]
2025-09-09 06:56:58,050 p=1700635 u=root n=ansible | ok: [rke2-worker3]
2025-09-09 06:56:59,285 p=1700635 u=root n=ansible | ok: [rke2-ingress01]
2025-09-09 06:56:59,302 p=1700635 u=root n=ansible | ok: [rke2-ingress02]
2025-09-09 06:56:59,305 p=1700635 u=root n=ansible | ok: [localhost]
2025-09-09 06:56:59,347 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 06:56:59,359 p=1700635 u=root n=ansible | TASK [update_hosts_file : Show connectivity test] ******************************************************************************************************************************************************
2025-09-09 06:56:59,404 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,422 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,442 p=1700635 u=root n=ansible | ok: [rke2-worker1] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,465 p=1700635 u=root n=ansible | ok: [rke2-worker2] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,483 p=1700635 u=root n=ansible | ok: [rke2-worker3] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,497 p=1700635 u=root n=ansible | ok: [rke2-ingress01] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,512 p=1700635 u=root n=ansible | ok: [rke2-ingress02] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,513 p=1700635 u=root n=ansible | ok: [localhost] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,535 p=1700635 u=root n=ansible | ok: [nginx] => {
    "msg": "Connectivity Test:\nSUCCESS - Can reach rancher.asl.brindisi.it\n"
}
2025-09-09 06:56:59,632 p=1700635 u=root n=ansible | PLAY [masters] *****************************************************************************************************************************************************************************************
2025-09-09 06:56:59,655 p=1700635 u=root n=ansible | TASK [master1_install : Install RKE2 on master1] *******************************************************************************************************************************************************
2025-09-09 06:57:04,110 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:04,122 p=1700635 u=root n=ansible | TASK [master1_install : Enable RKE2 server service] ****************************************************************************************************************************************************
2025-09-09 06:57:05,344 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:05,357 p=1700635 u=root n=ansible | TASK [master1_install : Start RKE2 server service] *****************************************************************************************************************************************************
2025-09-09 06:57:38,794 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:38,822 p=1700635 u=root n=ansible | TASK [master1_config : Create /etc/rancher/rke2/config.yaml on master1] ********************************************************************************************************************************
2025-09-09 06:57:40,070 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-17006354f7crdsh/tmphrx7o950/config_master1.yaml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+tls-san:[0m
[0;32m[0m[0;32m+   - rancher.asl.brindisi.it[0m
[0;32m[0m

2025-09-09 06:57:40,071 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:40,093 p=1700635 u=root n=ansible | TASK [master1_kubectl : Copy kubectl binary to /usr/local/bin/] ****************************************************************************************************************************************
2025-09-09 06:57:40,900 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:40,911 p=1700635 u=root n=ansible | TASK [master1_kubectl : Create /root/.kube directory] **************************************************************************************************************************************************
2025-09-09 06:57:41,245 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:41,257 p=1700635 u=root n=ansible | TASK [master1_kubectl : Copy RKE2 kubeconfig to /root/.kube/config] ************************************************************************************************************************************
2025-09-09 06:57:41,629 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:41,652 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Download Helm] ***********************************************************************************************************************************************
2025-09-09 06:57:42,439 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:42,451 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Extract Helm] ************************************************************************************************************************************************
2025-09-09 06:57:45,099 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:45,111 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Move Helm to /usr/local/bin] *********************************************************************************************************************************
2025-09-09 06:57:45,416 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:45,428 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Copy kubectl binary to /usr/local/bin/] **********************************************************************************************************************
2025-09-09 06:57:46,100 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:46,118 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Create /root/.kube directory] ********************************************************************************************************************************
2025-09-09 06:57:46,463 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:46,483 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Copy RKE2 kubeconfig to /root/.kube/config] ******************************************************************************************************************
2025-09-09 06:57:46,796 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:46,808 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : include_tasks] ***********************************************************************************************************************************************
2025-09-09 06:57:46,835 p=1700635 u=root n=ansible | included: /root/IAC/ansible-collaudo-brindisi/roles/master1_helm_cert_manager_install/tasks/master1_helm_cert_manager_install.yml for cornelio.app.iac-svil.almaviva.it
2025-09-09 06:57:46,845 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Add Rancher Helm repository] *********************************************************************************************************************************
2025-09-09 06:57:47,220 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:47,232 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Create cattle-system namespace] ******************************************************************************************************************************
2025-09-09 06:57:47,630 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:47,641 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Update Helm repositories] ************************************************************************************************************************************
2025-09-09 06:57:49,030 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:49,042 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Set kube permission] *****************************************************************************************************************************************
2025-09-09 06:57:49,373 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:49,385 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Copy fullchain.pem to remote host] ***************************************************************************************************************************
2025-09-09 06:57:50,459 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/IAC/ansible-collaudo-brindisi/roles/master1_helm_cert_manager_install/files/fullchain.pem[0m
[0;32m[0m[0;36m@@ -0,0 +1,120 @@[0m
[0;36m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIH4jCCBcqgAwIBAgIQDizIrqRztKlPiYudUD0SNjANBgkqhkiG9w0BAQsFADCB[0m
[0;32m[0m[0;32m+iTELMAkGA1UEBhMCSVQxEDAOBgNVBAgMB0JlcmdhbW8xGTAXBgNVBAcMEFBvbnRl[0m
[0;32m[0m[0;32m+IFNhbiBQaWV0cm8xFzAVBgNVBAoMDkFjdGFsaXMgUy5wLkEuMTQwMgYDVQQDDCtB[0m
[0;32m[0m[0;32m+Y3RhbGlzIE9yZ2FuaXphdGlvbiBWYWxpZGF0ZWQgU2VydmVyIENBIEczMB4XDTI1[0m
[0;32m[0m[0;32m+MDMyMTExMTQwMloXDTI2MDMyMTExMTQwMlowfjELMAkGA1UEBhMCSVQxETAPBgNV[0m
[0;32m[0m[0;32m+BAgMCEJyaW5kaXNpMREwDwYDVQQHDAhCcmluZGlzaTEtMCsGA1UECgwkQXppZW5k[0m
[0;32m[0m[0;32m+YSBTYW5pdGFyaWEgTG9jYWxlIERpIEJyaW5kaXNpMRowGAYDVQQDDBEqLmFzbC5i[0m
[0;32m[0m[0;32m+cmluZGlzaS5pdDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKvJQ7JO[0m
[0;32m[0m[0;32m+CCOd1boosk/kDjosVNYi2BkRwBTs/QNSd36I+cra+TW09TmkVkx/RHLrzdnegBYj[0m
[0;32m[0m[0;32m+sa9TgFoZeaFfx3SlSkRLpHNTGuOEKIT/DNETnIbzWHG4qpvxIn9BY2ysWhUHcvbH[0m
[0;32m[0m[0;32m+Kc8kTwjz0Ny5IjyhH7eL0RuX98Lm2sNmaUpJdStrKGi+9LuZxRU+R17uvvPOY0wx[0m
[0;32m[0m[0;32m+ouBvuqLihHt/a9oi81X8Fog2O9yE7PomIpL9UIf0s6weA5J6aXCGJA124UM3onSk[0m
[0;32m[0m[0;32m+RzIbjkkyn/3izG8gyJOLXJW+doAOqvAFW+kmA01be0fKmislP/CNZxRvVt7mMkCF[0m
[0;32m[0m[0;32m+R+MXsYJuc93j/scCAwEAAaOCA04wggNKMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgw[0m
[0;32m[0m[0;32m+FoAUn4qxtfGx3oL0J3y+iM3eqUOBo0swfgYIKwYBBQUHAQEEcjBwMDsGCCsGAQUF[0m
[0;32m[0m[0;32m+BzAChi9odHRwOi8vY2FjZXJ0LmFjdGFsaXMuaXQvY2VydHMvYWN0YWxpcy1hdXRo[0m
[0;32m[0m[0;32m+b3ZnMzAxBggrBgEFBQcwAYYlaHR0cDovL29jc3AwOS5hY3RhbGlzLml0L1ZBL0FV[0m
[0;32m[0m[0;32m+VEhPVi1HMzAtBgNVHREEJjAkgg9hc2wuYnJpbmRpc2kuaXSCESouYXNsLmJyaW5k[0m
[0;32m[0m[0;32m+aXNpLml0MFEGA1UdIARKMEgwPAYGK4EfARMBMDIwMAYIKwYBBQUHAgEWJGh0dHBz[0m
[0;32m[0m[0;32m+Oi8vd3d3LmFjdGFsaXMuaXQvYXJlYS1kb3dubG9hZDAIBgZngQwBAgIwHQYDVR0l[0m
[0;32m[0m[0;32m+BBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMEgGA1UdHwRBMD8wPaA7oDmGN2h0dHA6[0m
[0;32m[0m[0;32m+Ly9jcmwwOS5hY3RhbGlzLml0L1JlcG9zaXRvcnkvQVVUSE9WLUczL2dldExhc3RD[0m
[0;32m[0m[0;32m+UkwwHQYDVR0OBBYEFOVgTGCuhAe5wK/QrqOsAVe+ddmBMA4GA1UdDwEB/wQEAwIF[0m
[0;32m[0m[0;32m+oDCCAX0GCisGAQQB1nkCBAIEggFtBIIBaQFnAHYAlpdkv1VYl633Q4doNwhCd+nw[0m
[0;32m[0m[0;32m+OtX2pPM2bkakPw/KqcYAAAGVuHIlogAABAMARzBFAiEAzhmyunIECHzBklqgCO+F[0m
[0;32m[0m[0;32m+QF7b3abXFxEOAT1FrpTZhFUCIGJTQrG2TiRdQqgmDBsGcTwM8BBZg4uTywHitfIF[0m
[0;32m[0m[0;32m+G3NfAHYADleUvPOuqT4zGyyZB7P3kN+bwj1xMiXdIaklrGHFTiEAAAGVuHIlzQAA[0m
[0;32m[0m[0;32m+BAMARzBFAiBmU0QVJw8wAQRGlJmSXuOS5Bg0iU4hnBOBVrk1nrc1DwIhALYTW+Hs[0m
[0;32m[0m[0;32m+aoXpuyF6kYnoyvIXhzBabfBS6pWdUr5xtlgrAHUAJS+Uwisp6W6fQRpyBytpXFtS[0m
[0;32m[0m[0;32m+/5epDSVAu/zcUexN7gsAAAGVuHImPQAABAMARjBEAiB3u9fwDCDyLtwNjcmaqWx9[0m
[0;32m[0m[0;32m+tpiZKfR+dKiPsEa8FRc66gIgbf2myelRNqF+fkOQuI9qza3ttmXMzpznl5zCJYbb[0m
[0;32m[0m[0;32m+xSAwDQYJKoZIhvcNAQELBQADggIBAGS3fcTjtLbKGrm32OvjEUHpZNqzpawed6eg[0m
[0;32m[0m[0;32m+DKxN56tEZM6Vo9PaySUXP5lf9J9qdXV1gLb7q8pABG/7d/keSjhtdVX7rIciRwYK[0m
[0;32m[0m[0;32m+VIUzvfRg8MQe6vucEkNJb0CpR8X4jUW46JhuYiIRVM0DPtdwBmaglpMoWmRB8RY4[0m
[0;32m[0m[0;32m+CELgLh0cKKjRSMRHKcA3i570dI9+BccXcbmTZ60NqdKldhi9SZYylgfK1R2t6gD+[0m
[0;32m[0m[0;32m+yuA055iTfCibjiSqotE0e8K0Pl5c689Z824FZkVYxXNVxCgkY3KWppsXHsJLx9JQ[0m
[0;32m[0m[0;32m+vEQUIY7KwXuepZ+Tra3MgylGsyf2hW48s+JxUJuUauET6s1qUxjxGsKA4FK1Rcdt[0m
[0;32m[0m[0;32m+sMMFErblJ3pt1jOcEoVeG5OFg163k1EWZkAkjQ9sM3UtkatgxMnSiqoLDUIPEUXI[0m
[0;32m[0m[0;32m+Qm04onhNpOpeDD9ewvx1M3vjlBuYjeFreKMF1lmk0ExCHtVMraFYMhE8PXT/TkAs[0m
[0;32m[0m[0;32m+K/Yqj65tLIORdX2API0O8tUsuPa5AR4XVn6CpLXKHIP4j/O2htlkABfC3UlVKuDm[0m
[0;32m[0m[0;32m+hCsKRmn8SZAqb3oqcerBaHxu0y1mIxYpGgpE4hByFiLmfp9eGaZymmNA7NOYfuoO[0m
[0;32m[0m[0;32m+v0iz5tQtBobLAJkLm8zPGRYANeOtEqpIkVQwwZ3IJ2WuMfeyoYPGyLsvtj5At2Tv[0m
[0;32m[0m[0;32m+s6yL6i81[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIHdTCCBV2gAwIBAgIQXDs/N638KP4Pz9Or+D+FUTANBgkqhkiG9w0BAQsFADBr[0m
[0;32m[0m[0;32m+MQswCQYDVQQGEwJJVDEOMAwGA1UEBwwFTWlsYW4xIzAhBgNVBAoMGkFjdGFsaXMg[0m
[0;32m[0m[0;32m+Uy5wLkEuLzAzMzU4NTIwOTY3MScwJQYDVQQDDB5BY3RhbGlzIEF1dGhlbnRpY2F0[0m
[0;32m[0m[0;32m+aW9uIFJvb3QgQ0EwHhcNMjAwNzA2MDcyMDU1WhcNMzAwOTIyMTEyMjAyWjCBiTEL[0m
[0;32m[0m[0;32m+MAkGA1UEBhMCSVQxEDAOBgNVBAgMB0JlcmdhbW8xGTAXBgNVBAcMEFBvbnRlIFNh[0m
[0;32m[0m[0;32m+biBQaWV0cm8xFzAVBgNVBAoMDkFjdGFsaXMgUy5wLkEuMTQwMgYDVQQDDCtBY3Rh[0m
[0;32m[0m[0;32m+bGlzIE9yZ2FuaXphdGlvbiBWYWxpZGF0ZWQgU2VydmVyIENBIEczMIICIjANBgkq[0m
[0;32m[0m[0;32m+hkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAs73Ch+t2owm3ayTkyqy0OPuCTiybxTyS[0m
[0;32m[0m[0;32m+4cU4y0t2RGSwCNjLh/rcutO0yoriZxVtPrNMcIRQ544BQhHFt/ypW7e+t8wWKrHa[0m
[0;32m[0m[0;32m+r3BkKwSUbqNwpDWP1bXs7IJTVhHXWGAm7Ak1FhrrBmtXk8QtdzTzDDuxfFBK7sCL[0m
[0;32m[0m[0;32m+N0Jdqoqb1V1z3wsWqAvr4KlSCFW05Nh4baWm/kXOmb8U+XR6kUmuoVvia3iBhotR[0m
[0;32m[0m[0;32m+TzAHTO9SWWkgjTcir/nhBvyL2RoqkgYyP/k50bznaVOGFnFWzfl0XnrM/salfCBh[0m
[0;32m[0m[0;32m+O0/1vNaoU8elR6AtbdCFAupgQy95GuFIRVS8n/cF0QupfPjUl+kGSLzvGAc+6oNE[0m
[0;32m[0m[0;32m+alpAhKIS/+P0uODzRrS9Eq0WX1iSj6KHtQMNN4ZKsS4nsuvYCahnAc0QwQyoduAW[0m
[0;32m[0m[0;32m+iU/ynhU9WTIEe1VIoEDE79NPOI2/80RqbZqdpAKUaf0FvuqVXhEcjiJJu+d0w9YN[0m
[0;32m[0m[0;32m+b7gurd6xkaSXemW/fP4idBiNkd8aCVAdshGQYn6yh+na0Lu5IG88Z2kSIFcXDtwy[0m
[0;32m[0m[0;32m+zjcxkW86pwkO6GekEomVBNKcv0Cey2Smf8uhpZk15TSCeyFDrZBWH9OsDst/Tnhz[0m
[0;32m[0m[0;32m+pN156Huw3M3RRdEegt33fcyPykgt0HThxrEv9DwOzhs6lCQ5RNQJO7ZvZF1ZiqgT[0m
[0;32m[0m[0;32m+FOJ6vs1xMqECAwEAAaOCAfQwggHwMA8GA1UdEwEB/wQFMAMBAf8wHwYDVR0jBBgw[0m
[0;32m[0m[0;32m+FoAUUtiIOsifeGbtifN7OHCUyQICNtAwQQYIKwYBBQUHAQEENTAzMDEGCCsGAQUF[0m
[0;32m[0m[0;32m+BzABhiVodHRwOi8vb2NzcDA1LmFjdGFsaXMuaXQvVkEvQVVUSC1ST09UMEUGA1Ud[0m
[0;32m[0m[0;32m+IAQ+MDwwOgYEVR0gADAyMDAGCCsGAQUFBwIBFiRodHRwczovL3d3dy5hY3RhbGlz[0m
[0;32m[0m[0;32m+Lml0L2FyZWEtZG93bmxvYWQwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMB[0m
[0;32m[0m[0;32m+MIHjBgNVHR8EgdswgdgwgZaggZOggZCGgY1sZGFwOi8vbGRhcDA1LmFjdGFsaXMu[0m
[0;32m[0m[0;32m+aXQvY24lM2RBY3RhbGlzJTIwQXV0aGVudGljYXRpb24lMjBSb290JTIwQ0EsbyUz[0m
[0;32m[0m[0;32m+ZEFjdGFsaXMlMjBTLnAuQS4lMmYwMzM1ODUyMDk2NyxjJTNkSVQ/Y2VydGlmaWNh[0m
[0;32m[0m[0;32m+dGVSZXZvY2F0aW9uTGlzdDtiaW5hcnkwPaA7oDmGN2h0dHA6Ly9jcmwwNS5hY3Rh[0m
[0;32m[0m[0;32m+bGlzLml0L1JlcG9zaXRvcnkvQVVUSC1ST09UL2dldExhc3RDUkwwHQYDVR0OBBYE[0m
[0;32m[0m[0;32m+FJ+KsbXxsd6C9Cd8vojN3qlDgaNLMA4GA1UdDwEB/wQEAwIBBjANBgkqhkiG9w0B[0m
[0;32m[0m[0;32m+AQsFAAOCAgEAJbygMnKJ5M6byr5Ectq05ODqwNMtky8TEF3O55g6RHhxblf6OegZ[0m
[0;32m[0m[0;32m+4ui4+ElHNOIXjycbeuUGuFA4LScCC9fnI1Rnn8TI2Q7OP5YWifEfnrdp99t/tJzQ[0m
[0;32m[0m[0;32m+hfdi7ZTdRRZZGV9x+grfR/RtjT2C3Lt9X4lcbuSxTea3PHAwwi0A3bYRR1L5ciPm[0m
[0;32m[0m[0;32m+eAnYtG9kpat8/RuC22oxiZZ5FdjU6wrRWkASRLiIwNcFIYfvpUbMWElaCUhqaB2y[0m
[0;32m[0m[0;32m+YvWF8o02pnaYb4bvTCg4cVabVnojUuuXH81LeQhhsSXLwcdwSdew0NL4zCiNCn2Q[0m
[0;32m[0m[0;32m+iDZpz2biCWDggibmWxsUUF6AbqMHnwsdS8vsKXiFQJHeAdNAhA+kwpqYAdhUiCdj[0m
[0;32m[0m[0;32m+RTUdtRNUucLvZEN1OAvVYyog9xYCfhtkqgXQROMANP+Z/+yaZahaP/Vgak/V00se[0m
[0;32m[0m[0;32m+Hdh7F+B6h5HVdwdh+17E2jl+aMTfyvBFcg2H/9Qjyl4TY8NW/6v0DPK52sVt8a35[0m
[0;32m[0m[0;32m+I+7xLGLPohAl4z6pEf2OxgjMNfXXCXS33smRgz1dLQFo8UpAb3rf84zkXaqEI6Qi[0m
[0;32m[0m[0;32m+2P+5pibVFQigRbn4RcE+K2a/nm2M/o+WZTSio+E+YXacnNk71VcO82biOof+jBKT[0m
[0;32m[0m[0;32m+iC3Xi7rAlypmme+QFBw9F1J89ig3smV/HaN8tO0lfTpvm7Zvzd5TkMs=[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIFuzCCA6OgAwIBAgIIVwoRl0LE48wwDQYJKoZIhvcNAQELBQAwazELMAkGA1UE[0m
[0;32m[0m[0;32m+BhMCSVQxDjAMBgNVBAcMBU1pbGFuMSMwIQYDVQQKDBpBY3RhbGlzIFMucC5BLi8w[0m
[0;32m[0m[0;32m+MzM1ODUyMDk2NzEnMCUGA1UEAwweQWN0YWxpcyBBdXRoZW50aWNhdGlvbiBSb290[0m
[0;32m[0m[0;32m+IENBMB4XDTExMDkyMjExMjIwMloXDTMwMDkyMjExMjIwMlowazELMAkGA1UEBhMC[0m
[0;32m[0m[0;32m+SVQxDjAMBgNVBAcMBU1pbGFuMSMwIQYDVQQKDBpBY3RhbGlzIFMucC5BLi8wMzM1[0m
[0;32m[0m[0;32m+ODUyMDk2NzEnMCUGA1UEAwweQWN0YWxpcyBBdXRoZW50aWNhdGlvbiBSb290IENB[0m
[0;32m[0m[0;32m+MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAp8bEpSmkLO/lGMWwUKNv[0m
[0;32m[0m[0;32m+UTufClrJwkg4CsIcoBh/kbWHuUA/3R1oHwiD1S0eiKD4j1aPbZkCkpAW1V8IbInX[0m
[0;32m[0m[0;32m+4ay8IMKx4INRimlNAJZaby/ARH6jDuSRzVju3PvHHkVH3Se5CAGfpiEd9UEtL0z9[0m
[0;32m[0m[0;32m+KK3giq0itFZljoZUj5NDKd45RnijMCO6zfB9E1fAXdKDa0hMxKufgFpbOr3JpyI/[0m
[0;32m[0m[0;32m+gCczWw63igxdBzcIy2zSekciRDXFzMwujt0q7bd9Zg1fYVEiVRvjRuPjPdA1Yprb[0m
[0;32m[0m[0;32m+rxTIW6HMiRvhMCb8oJsfgadHHwTrozmSBp+Z07/T6k9QnBn+locePGX2oxgkg4YQ[0m
[0;32m[0m[0;32m+51Q+qDp2JE+BIcXjDwL4k5RHILv+1A7TaLndxHqEguNTVHnd25zS8gebLra8Pu2F[0m
[0;32m[0m[0;32m+be8lEfKXGkJh90qX6IuxEAf6ZYGyojnP9zz/GPvG8VqLWeICrHuS0E4UT1lF9gxe[0m
[0;32m[0m[0;32m+KF+w6D9Fz8+vm2/7hNN3WpVvrJSEnu68wEqPSpP4RCHiMUVhUE4Q2OM1fEwZtN4F[0m
[0;32m[0m[0;32m+v6MGn8i1zeQf1xcGDXqVdFUNaBr8EBtiZJ1t4JWgw5QHVw0U5r0F+7if5t+L4sbn[0m
[0;32m[0m[0;32m+fpb2U8WANFAoWPASUHEXMLrmeGO89LKtmyuy/uE5jF66CyCU3nuDuP/jVo23Eek7[0m
[0;32m[0m[0;32m+jPKxwV2dpAtMK9myGPW1n0sCAwEAAaNjMGEwHQYDVR0OBBYEFFLYiDrIn3hm7Ynz[0m
[0;32m[0m[0;32m+ezhwlMkCAjbQMA8GA1UdEwEB/wQFMAMBAf8wHwYDVR0jBBgwFoAUUtiIOsifeGbt[0m
[0;32m[0m[0;32m+ifN7OHCUyQICNtAwDgYDVR0PAQH/BAQDAgEGMA0GCSqGSIb3DQEBCwUAA4ICAQAL[0m
[0;32m[0m[0;32m+e3KHwGCmSUyIWOYdiPcUZEim2FgKDk8TNd81HdTtBjHIgT5q1d07GjLukD0R0i70[0m
[0;32m[0m[0;32m+jsNjLiNmsGe+b7bAEzlgqqI0JZN1Ut6nna0Oh4lScWoWPBkdg/iaKWW+9D+a2fDz[0m
[0;32m[0m[0;32m+WochcYBNy+A4mz+7+uAwTc+G02UQGRjRlwKxK3JCaKygvU5a2hi/a5iB0P2avl4V[0m
[0;32m[0m[0;32m+SM0RFbnAKVy06Ij3Pjaut2L9HmLecHgQHEhb2rykOLpn7VU+Xlff1ANATIGk0k9j[0m
[0;32m[0m[0;32m+pwlCCRT8AKnCgHNPLsBA2RF7SOp6AsDT6ygBJlh0wcBzIm2Tlf05fbsq4/aC4yyX[0m
[0;32m[0m[0;32m+X04fkZT6/iyj2HYauE2yOE+b+h1IYHkm4vP9qdCa6HCPSXrW5b0KDtst842/6+Ok[0m
[0;32m[0m[0;32m+fcvHlXHo2qN8xcL4dJIEG4aspCJTQLas/kx2z/uUMsA1n3Y/buWQbqCmJqK4LL7R[0m
[0;32m[0m[0;32m+K4X9p2jIugErsWx0Hbhzlefut8cl8ABMALJ+tguLHPPAUJ4lueAI3jZm/zel0btU[0m
[0;32m[0m[0;32m+ZCzJJ7VLkn5l/9Mt4blOvH+kQSGQQXemOR/qnuOf0GZvBeyqdn6/axag67XH/JJU[0m
[0;32m[0m[0;32m+LysRJyU3eExRarDzzFhdFPFqSBX/wge2sY0PjlxQRrM9vwGYT7JZVEc+NHt4bVaT[0m
[0;32m[0m[0;32m+LnPqZih4zR0Uv6CPLy64Lo7yFIrM6bV8+2ydDKXhlg==[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2025-09-09 06:57:50,459 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:50,472 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Copy privkey.pem to remote host] *****************************************************************************************************************************
2025-09-09 06:57:51,504 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/IAC/ansible-collaudo-brindisi/roles/master1_helm_cert_manager_install/files/privkey.pem[0m
[0;32m[0m[0;36m@@ -0,0 +1,28 @@[0m
[0;36m[0m[0;32m+-----BEGIN PRIVATE KEY-----[0m
[0;32m[0m[0;32m+MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCryUOyTggjndW6[0m
[0;32m[0m[0;32m+KLJP5A46LFTWItgZEcAU7P0DUnd+iPnK2vk1tPU5pFZMf0Ry683Z3oAWI7GvU4Ba[0m
[0;32m[0m[0;32m+GXmhX8d0pUpES6RzUxrjhCiE/wzRE5yG81hxuKqb8SJ/QWNsrFoVB3L2xynPJE8I[0m
[0;32m[0m[0;32m+89DcuSI8oR+3i9Ebl/fC5trDZmlKSXUrayhovvS7mcUVPkde7r7zzmNMMaLgb7qi[0m
[0;32m[0m[0;32m+4oR7f2vaIvNV/BaINjvchOz6JiKS/VCH9LOsHgOSemlwhiQNduFDN6J0pEcyG45J[0m
[0;32m[0m[0;32m+Mp/94sxvIMiTi1yVvnaADqrwBVvpJgNNW3tHyporJT/wjWcUb1be5jJAhUfjF7GC[0m
[0;32m[0m[0;32m+bnPd4/7HAgMBAAECggEAJ9VM/cDrUTrtjrOWGUFT7ThPWbINss5zYEbNqmIKdExV[0m
[0;32m[0m[0;32m+w6x/4ey6eim5mxZdrFoySuU1hSy0rGdr2TiUBA/eA5W6QVja4qTwFLaV4LT1Z1up[0m
[0;32m[0m[0;32m+TX+K0B/Wa79/1Ms4P0A9ySeHiGKJNs+ABh7nHO9O2Ykw/hINJF1aJZb7Phj2rDM3[0m
[0;32m[0m[0;32m+2lWELr5E2ROMyapM/ixTyRsISxYl81cR62GZ7Z0VUXjFOFwEtWiX7AGOdytygIxN[0m
[0;32m[0m[0;32m+h5ud9a6U/3JDwc7IFKHIBBIsuX3qiLzlLMUW1mFTZdorAlGcZv3fzbOh96x2TcXA[0m
[0;32m[0m[0;32m+ocvHfbC8BhdXw+POv0352glh0ynAKl8C3XP4zmo5JQKBgQDg8Uu6FDZMM7iFKChd[0m
[0;32m[0m[0;32m+QNi0a60Dj0Jyi1feYwWk0fBPAzIs2QhQiIUdcbUSZAtjqRgPmt7rs2drRTnmpatD[0m
[0;32m[0m[0;32m+ywzdk1vhRFP0DfjmoVtmaQYmnSawFYI2S9kI19zqF14k27IaDa51v975oG99iOly[0m
[0;32m[0m[0;32m+0JRGtQwMBwHoY1Xg4s1LUWnsSwKBgQDDgSF8ZGl3aRZO9SDJM27YbtStCKhzrs5f[0m
[0;32m[0m[0;32m+sOp0asyTjWXcMSQruXkEIJ05RhiPscbC1d5skZCJbSDr173TtevCeod8bdU7EM5I[0m
[0;32m[0m[0;32m+g+DmsPvIaRNtCuQz3WL1q5Ky9+3O+4cXhhocgmZJnG8pCPtMW/eMDHOz6lxtkmLB[0m
[0;32m[0m[0;32m+6uiW5E+x9QKBgAugDNTaFJBNn/ypvaRMJKb2ZaOodLusvebNYU5KV0wOEzrEIKzg[0m
[0;32m[0m[0;32m+0VhbNwtzRi9pXsf3rguqYu7lTf/AkiBXzxtocTgsKtaTHkj1D980EFBQkN5Kzkb2[0m
[0;32m[0m[0;32m+FophdZZXjNME06iLCnglaWWnR/vJ5p67bt5UnwHEHvIeqCKONiPtWjcPAoGBAIU8[0m
[0;32m[0m[0;32m+5A1agWYYAFQfSxDUNJ7cKaUjWWo9n/gnIiHlBzcoDltaQkRqSsc9UulNlD+Z8NOn[0m
[0;32m[0m[0;32m+3cYwDkkaTm1swroeKWaJCv0J/WAbu/o/pm6R/4Y91jdiTNPr9R1oqLm/rhp54T9u[0m
[0;32m[0m[0;32m+7Syw0fUo37kfneQUaUjQ06mx9vvV3+g4p/rt7kJhAoGANzNm2MlcOfkVbpopcomi[0m
[0;32m[0m[0;32m+Aba//7FZKquoMSKKJbkgb0UTJ5M1+WzgPrDW0I48gXuCRXw9RMzWORGNQkac6r3A[0m
[0;32m[0m[0;32m+KFluzkVEOkR1ziWY/zxSPiw6Zbya465ZHRLU9yUUdcX4cmkbyYGL3ww4pgGj7L2f[0m
[0;32m[0m[0;32m+8AyPVPgQ4IOFhrUT/71qDRc=[0m
[0;32m[0m[0;32m+-----END PRIVATE KEY-----[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2025-09-09 06:57:51,505 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:51,516 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Copy cacerts.pem to remote host] *****************************************************************************************************************************
2025-09-09 06:57:52,369 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/IAC/ansible-collaudo-brindisi/roles/master1_helm_cert_manager_install/files/cacerts.pem[0m
[0;32m[0m[0;36m@@ -0,0 +1,120 @@[0m
[0;36m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIH4jCCBcqgAwIBAgIQDizIrqRztKlPiYudUD0SNjANBgkqhkiG9w0BAQsFADCB[0m
[0;32m[0m[0;32m+iTELMAkGA1UEBhMCSVQxEDAOBgNVBAgMB0JlcmdhbW8xGTAXBgNVBAcMEFBvbnRl[0m
[0;32m[0m[0;32m+IFNhbiBQaWV0cm8xFzAVBgNVBAoMDkFjdGFsaXMgUy5wLkEuMTQwMgYDVQQDDCtB[0m
[0;32m[0m[0;32m+Y3RhbGlzIE9yZ2FuaXphdGlvbiBWYWxpZGF0ZWQgU2VydmVyIENBIEczMB4XDTI1[0m
[0;32m[0m[0;32m+MDMyMTExMTQwMloXDTI2MDMyMTExMTQwMlowfjELMAkGA1UEBhMCSVQxETAPBgNV[0m
[0;32m[0m[0;32m+BAgMCEJyaW5kaXNpMREwDwYDVQQHDAhCcmluZGlzaTEtMCsGA1UECgwkQXppZW5k[0m
[0;32m[0m[0;32m+YSBTYW5pdGFyaWEgTG9jYWxlIERpIEJyaW5kaXNpMRowGAYDVQQDDBEqLmFzbC5i[0m
[0;32m[0m[0;32m+cmluZGlzaS5pdDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKvJQ7JO[0m
[0;32m[0m[0;32m+CCOd1boosk/kDjosVNYi2BkRwBTs/QNSd36I+cra+TW09TmkVkx/RHLrzdnegBYj[0m
[0;32m[0m[0;32m+sa9TgFoZeaFfx3SlSkRLpHNTGuOEKIT/DNETnIbzWHG4qpvxIn9BY2ysWhUHcvbH[0m
[0;32m[0m[0;32m+Kc8kTwjz0Ny5IjyhH7eL0RuX98Lm2sNmaUpJdStrKGi+9LuZxRU+R17uvvPOY0wx[0m
[0;32m[0m[0;32m+ouBvuqLihHt/a9oi81X8Fog2O9yE7PomIpL9UIf0s6weA5J6aXCGJA124UM3onSk[0m
[0;32m[0m[0;32m+RzIbjkkyn/3izG8gyJOLXJW+doAOqvAFW+kmA01be0fKmislP/CNZxRvVt7mMkCF[0m
[0;32m[0m[0;32m+R+MXsYJuc93j/scCAwEAAaOCA04wggNKMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgw[0m
[0;32m[0m[0;32m+FoAUn4qxtfGx3oL0J3y+iM3eqUOBo0swfgYIKwYBBQUHAQEEcjBwMDsGCCsGAQUF[0m
[0;32m[0m[0;32m+BzAChi9odHRwOi8vY2FjZXJ0LmFjdGFsaXMuaXQvY2VydHMvYWN0YWxpcy1hdXRo[0m
[0;32m[0m[0;32m+b3ZnMzAxBggrBgEFBQcwAYYlaHR0cDovL29jc3AwOS5hY3RhbGlzLml0L1ZBL0FV[0m
[0;32m[0m[0;32m+VEhPVi1HMzAtBgNVHREEJjAkgg9hc2wuYnJpbmRpc2kuaXSCESouYXNsLmJyaW5k[0m
[0;32m[0m[0;32m+aXNpLml0MFEGA1UdIARKMEgwPAYGK4EfARMBMDIwMAYIKwYBBQUHAgEWJGh0dHBz[0m
[0;32m[0m[0;32m+Oi8vd3d3LmFjdGFsaXMuaXQvYXJlYS1kb3dubG9hZDAIBgZngQwBAgIwHQYDVR0l[0m
[0;32m[0m[0;32m+BBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMEgGA1UdHwRBMD8wPaA7oDmGN2h0dHA6[0m
[0;32m[0m[0;32m+Ly9jcmwwOS5hY3RhbGlzLml0L1JlcG9zaXRvcnkvQVVUSE9WLUczL2dldExhc3RD[0m
[0;32m[0m[0;32m+UkwwHQYDVR0OBBYEFOVgTGCuhAe5wK/QrqOsAVe+ddmBMA4GA1UdDwEB/wQEAwIF[0m
[0;32m[0m[0;32m+oDCCAX0GCisGAQQB1nkCBAIEggFtBIIBaQFnAHYAlpdkv1VYl633Q4doNwhCd+nw[0m
[0;32m[0m[0;32m+OtX2pPM2bkakPw/KqcYAAAGVuHIlogAABAMARzBFAiEAzhmyunIECHzBklqgCO+F[0m
[0;32m[0m[0;32m+QF7b3abXFxEOAT1FrpTZhFUCIGJTQrG2TiRdQqgmDBsGcTwM8BBZg4uTywHitfIF[0m
[0;32m[0m[0;32m+G3NfAHYADleUvPOuqT4zGyyZB7P3kN+bwj1xMiXdIaklrGHFTiEAAAGVuHIlzQAA[0m
[0;32m[0m[0;32m+BAMARzBFAiBmU0QVJw8wAQRGlJmSXuOS5Bg0iU4hnBOBVrk1nrc1DwIhALYTW+Hs[0m
[0;32m[0m[0;32m+aoXpuyF6kYnoyvIXhzBabfBS6pWdUr5xtlgrAHUAJS+Uwisp6W6fQRpyBytpXFtS[0m
[0;32m[0m[0;32m+/5epDSVAu/zcUexN7gsAAAGVuHImPQAABAMARjBEAiB3u9fwDCDyLtwNjcmaqWx9[0m
[0;32m[0m[0;32m+tpiZKfR+dKiPsEa8FRc66gIgbf2myelRNqF+fkOQuI9qza3ttmXMzpznl5zCJYbb[0m
[0;32m[0m[0;32m+xSAwDQYJKoZIhvcNAQELBQADggIBAGS3fcTjtLbKGrm32OvjEUHpZNqzpawed6eg[0m
[0;32m[0m[0;32m+DKxN56tEZM6Vo9PaySUXP5lf9J9qdXV1gLb7q8pABG/7d/keSjhtdVX7rIciRwYK[0m
[0;32m[0m[0;32m+VIUzvfRg8MQe6vucEkNJb0CpR8X4jUW46JhuYiIRVM0DPtdwBmaglpMoWmRB8RY4[0m
[0;32m[0m[0;32m+CELgLh0cKKjRSMRHKcA3i570dI9+BccXcbmTZ60NqdKldhi9SZYylgfK1R2t6gD+[0m
[0;32m[0m[0;32m+yuA055iTfCibjiSqotE0e8K0Pl5c689Z824FZkVYxXNVxCgkY3KWppsXHsJLx9JQ[0m
[0;32m[0m[0;32m+vEQUIY7KwXuepZ+Tra3MgylGsyf2hW48s+JxUJuUauET6s1qUxjxGsKA4FK1Rcdt[0m
[0;32m[0m[0;32m+sMMFErblJ3pt1jOcEoVeG5OFg163k1EWZkAkjQ9sM3UtkatgxMnSiqoLDUIPEUXI[0m
[0;32m[0m[0;32m+Qm04onhNpOpeDD9ewvx1M3vjlBuYjeFreKMF1lmk0ExCHtVMraFYMhE8PXT/TkAs[0m
[0;32m[0m[0;32m+K/Yqj65tLIORdX2API0O8tUsuPa5AR4XVn6CpLXKHIP4j/O2htlkABfC3UlVKuDm[0m
[0;32m[0m[0;32m+hCsKRmn8SZAqb3oqcerBaHxu0y1mIxYpGgpE4hByFiLmfp9eGaZymmNA7NOYfuoO[0m
[0;32m[0m[0;32m+v0iz5tQtBobLAJkLm8zPGRYANeOtEqpIkVQwwZ3IJ2WuMfeyoYPGyLsvtj5At2Tv[0m
[0;32m[0m[0;32m+s6yL6i81[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIHdTCCBV2gAwIBAgIQXDs/N638KP4Pz9Or+D+FUTANBgkqhkiG9w0BAQsFADBr[0m
[0;32m[0m[0;32m+MQswCQYDVQQGEwJJVDEOMAwGA1UEBwwFTWlsYW4xIzAhBgNVBAoMGkFjdGFsaXMg[0m
[0;32m[0m[0;32m+Uy5wLkEuLzAzMzU4NTIwOTY3MScwJQYDVQQDDB5BY3RhbGlzIEF1dGhlbnRpY2F0[0m
[0;32m[0m[0;32m+aW9uIFJvb3QgQ0EwHhcNMjAwNzA2MDcyMDU1WhcNMzAwOTIyMTEyMjAyWjCBiTEL[0m
[0;32m[0m[0;32m+MAkGA1UEBhMCSVQxEDAOBgNVBAgMB0JlcmdhbW8xGTAXBgNVBAcMEFBvbnRlIFNh[0m
[0;32m[0m[0;32m+biBQaWV0cm8xFzAVBgNVBAoMDkFjdGFsaXMgUy5wLkEuMTQwMgYDVQQDDCtBY3Rh[0m
[0;32m[0m[0;32m+bGlzIE9yZ2FuaXphdGlvbiBWYWxpZGF0ZWQgU2VydmVyIENBIEczMIICIjANBgkq[0m
[0;32m[0m[0;32m+hkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAs73Ch+t2owm3ayTkyqy0OPuCTiybxTyS[0m
[0;32m[0m[0;32m+4cU4y0t2RGSwCNjLh/rcutO0yoriZxVtPrNMcIRQ544BQhHFt/ypW7e+t8wWKrHa[0m
[0;32m[0m[0;32m+r3BkKwSUbqNwpDWP1bXs7IJTVhHXWGAm7Ak1FhrrBmtXk8QtdzTzDDuxfFBK7sCL[0m
[0;32m[0m[0;32m+N0Jdqoqb1V1z3wsWqAvr4KlSCFW05Nh4baWm/kXOmb8U+XR6kUmuoVvia3iBhotR[0m
[0;32m[0m[0;32m+TzAHTO9SWWkgjTcir/nhBvyL2RoqkgYyP/k50bznaVOGFnFWzfl0XnrM/salfCBh[0m
[0;32m[0m[0;32m+O0/1vNaoU8elR6AtbdCFAupgQy95GuFIRVS8n/cF0QupfPjUl+kGSLzvGAc+6oNE[0m
[0;32m[0m[0;32m+alpAhKIS/+P0uODzRrS9Eq0WX1iSj6KHtQMNN4ZKsS4nsuvYCahnAc0QwQyoduAW[0m
[0;32m[0m[0;32m+iU/ynhU9WTIEe1VIoEDE79NPOI2/80RqbZqdpAKUaf0FvuqVXhEcjiJJu+d0w9YN[0m
[0;32m[0m[0;32m+b7gurd6xkaSXemW/fP4idBiNkd8aCVAdshGQYn6yh+na0Lu5IG88Z2kSIFcXDtwy[0m
[0;32m[0m[0;32m+zjcxkW86pwkO6GekEomVBNKcv0Cey2Smf8uhpZk15TSCeyFDrZBWH9OsDst/Tnhz[0m
[0;32m[0m[0;32m+pN156Huw3M3RRdEegt33fcyPykgt0HThxrEv9DwOzhs6lCQ5RNQJO7ZvZF1ZiqgT[0m
[0;32m[0m[0;32m+FOJ6vs1xMqECAwEAAaOCAfQwggHwMA8GA1UdEwEB/wQFMAMBAf8wHwYDVR0jBBgw[0m
[0;32m[0m[0;32m+FoAUUtiIOsifeGbtifN7OHCUyQICNtAwQQYIKwYBBQUHAQEENTAzMDEGCCsGAQUF[0m
[0;32m[0m[0;32m+BzABhiVodHRwOi8vb2NzcDA1LmFjdGFsaXMuaXQvVkEvQVVUSC1ST09UMEUGA1Ud[0m
[0;32m[0m[0;32m+IAQ+MDwwOgYEVR0gADAyMDAGCCsGAQUFBwIBFiRodHRwczovL3d3dy5hY3RhbGlz[0m
[0;32m[0m[0;32m+Lml0L2FyZWEtZG93bmxvYWQwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMB[0m
[0;32m[0m[0;32m+MIHjBgNVHR8EgdswgdgwgZaggZOggZCGgY1sZGFwOi8vbGRhcDA1LmFjdGFsaXMu[0m
[0;32m[0m[0;32m+aXQvY24lM2RBY3RhbGlzJTIwQXV0aGVudGljYXRpb24lMjBSb290JTIwQ0EsbyUz[0m
[0;32m[0m[0;32m+ZEFjdGFsaXMlMjBTLnAuQS4lMmYwMzM1ODUyMDk2NyxjJTNkSVQ/Y2VydGlmaWNh[0m
[0;32m[0m[0;32m+dGVSZXZvY2F0aW9uTGlzdDtiaW5hcnkwPaA7oDmGN2h0dHA6Ly9jcmwwNS5hY3Rh[0m
[0;32m[0m[0;32m+bGlzLml0L1JlcG9zaXRvcnkvQVVUSC1ST09UL2dldExhc3RDUkwwHQYDVR0OBBYE[0m
[0;32m[0m[0;32m+FJ+KsbXxsd6C9Cd8vojN3qlDgaNLMA4GA1UdDwEB/wQEAwIBBjANBgkqhkiG9w0B[0m
[0;32m[0m[0;32m+AQsFAAOCAgEAJbygMnKJ5M6byr5Ectq05ODqwNMtky8TEF3O55g6RHhxblf6OegZ[0m
[0;32m[0m[0;32m+4ui4+ElHNOIXjycbeuUGuFA4LScCC9fnI1Rnn8TI2Q7OP5YWifEfnrdp99t/tJzQ[0m
[0;32m[0m[0;32m+hfdi7ZTdRRZZGV9x+grfR/RtjT2C3Lt9X4lcbuSxTea3PHAwwi0A3bYRR1L5ciPm[0m
[0;32m[0m[0;32m+eAnYtG9kpat8/RuC22oxiZZ5FdjU6wrRWkASRLiIwNcFIYfvpUbMWElaCUhqaB2y[0m
[0;32m[0m[0;32m+YvWF8o02pnaYb4bvTCg4cVabVnojUuuXH81LeQhhsSXLwcdwSdew0NL4zCiNCn2Q[0m
[0;32m[0m[0;32m+iDZpz2biCWDggibmWxsUUF6AbqMHnwsdS8vsKXiFQJHeAdNAhA+kwpqYAdhUiCdj[0m
[0;32m[0m[0;32m+RTUdtRNUucLvZEN1OAvVYyog9xYCfhtkqgXQROMANP+Z/+yaZahaP/Vgak/V00se[0m
[0;32m[0m[0;32m+Hdh7F+B6h5HVdwdh+17E2jl+aMTfyvBFcg2H/9Qjyl4TY8NW/6v0DPK52sVt8a35[0m
[0;32m[0m[0;32m+I+7xLGLPohAl4z6pEf2OxgjMNfXXCXS33smRgz1dLQFo8UpAb3rf84zkXaqEI6Qi[0m
[0;32m[0m[0;32m+2P+5pibVFQigRbn4RcE+K2a/nm2M/o+WZTSio+E+YXacnNk71VcO82biOof+jBKT[0m
[0;32m[0m[0;32m+iC3Xi7rAlypmme+QFBw9F1J89ig3smV/HaN8tO0lfTpvm7Zvzd5TkMs=[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIFuzCCA6OgAwIBAgIIVwoRl0LE48wwDQYJKoZIhvcNAQELBQAwazELMAkGA1UE[0m
[0;32m[0m[0;32m+BhMCSVQxDjAMBgNVBAcMBU1pbGFuMSMwIQYDVQQKDBpBY3RhbGlzIFMucC5BLi8w[0m
[0;32m[0m[0;32m+MzM1ODUyMDk2NzEnMCUGA1UEAwweQWN0YWxpcyBBdXRoZW50aWNhdGlvbiBSb290[0m
[0;32m[0m[0;32m+IENBMB4XDTExMDkyMjExMjIwMloXDTMwMDkyMjExMjIwMlowazELMAkGA1UEBhMC[0m
[0;32m[0m[0;32m+SVQxDjAMBgNVBAcMBU1pbGFuMSMwIQYDVQQKDBpBY3RhbGlzIFMucC5BLi8wMzM1[0m
[0;32m[0m[0;32m+ODUyMDk2NzEnMCUGA1UEAwweQWN0YWxpcyBBdXRoZW50aWNhdGlvbiBSb290IENB[0m
[0;32m[0m[0;32m+MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAp8bEpSmkLO/lGMWwUKNv[0m
[0;32m[0m[0;32m+UTufClrJwkg4CsIcoBh/kbWHuUA/3R1oHwiD1S0eiKD4j1aPbZkCkpAW1V8IbInX[0m
[0;32m[0m[0;32m+4ay8IMKx4INRimlNAJZaby/ARH6jDuSRzVju3PvHHkVH3Se5CAGfpiEd9UEtL0z9[0m
[0;32m[0m[0;32m+KK3giq0itFZljoZUj5NDKd45RnijMCO6zfB9E1fAXdKDa0hMxKufgFpbOr3JpyI/[0m
[0;32m[0m[0;32m+gCczWw63igxdBzcIy2zSekciRDXFzMwujt0q7bd9Zg1fYVEiVRvjRuPjPdA1Yprb[0m
[0;32m[0m[0;32m+rxTIW6HMiRvhMCb8oJsfgadHHwTrozmSBp+Z07/T6k9QnBn+locePGX2oxgkg4YQ[0m
[0;32m[0m[0;32m+51Q+qDp2JE+BIcXjDwL4k5RHILv+1A7TaLndxHqEguNTVHnd25zS8gebLra8Pu2F[0m
[0;32m[0m[0;32m+be8lEfKXGkJh90qX6IuxEAf6ZYGyojnP9zz/GPvG8VqLWeICrHuS0E4UT1lF9gxe[0m
[0;32m[0m[0;32m+KF+w6D9Fz8+vm2/7hNN3WpVvrJSEnu68wEqPSpP4RCHiMUVhUE4Q2OM1fEwZtN4F[0m
[0;32m[0m[0;32m+v6MGn8i1zeQf1xcGDXqVdFUNaBr8EBtiZJ1t4JWgw5QHVw0U5r0F+7if5t+L4sbn[0m
[0;32m[0m[0;32m+fpb2U8WANFAoWPASUHEXMLrmeGO89LKtmyuy/uE5jF66CyCU3nuDuP/jVo23Eek7[0m
[0;32m[0m[0;32m+jPKxwV2dpAtMK9myGPW1n0sCAwEAAaNjMGEwHQYDVR0OBBYEFFLYiDrIn3hm7Ynz[0m
[0;32m[0m[0;32m+ezhwlMkCAjbQMA8GA1UdEwEB/wQFMAMBAf8wHwYDVR0jBBgwFoAUUtiIOsifeGbt[0m
[0;32m[0m[0;32m+ifN7OHCUyQICNtAwDgYDVR0PAQH/BAQDAgEGMA0GCSqGSIb3DQEBCwUAA4ICAQAL[0m
[0;32m[0m[0;32m+e3KHwGCmSUyIWOYdiPcUZEim2FgKDk8TNd81HdTtBjHIgT5q1d07GjLukD0R0i70[0m
[0;32m[0m[0;32m+jsNjLiNmsGe+b7bAEzlgqqI0JZN1Ut6nna0Oh4lScWoWPBkdg/iaKWW+9D+a2fDz[0m
[0;32m[0m[0;32m+WochcYBNy+A4mz+7+uAwTc+G02UQGRjRlwKxK3JCaKygvU5a2hi/a5iB0P2avl4V[0m
[0;32m[0m[0;32m+SM0RFbnAKVy06Ij3Pjaut2L9HmLecHgQHEhb2rykOLpn7VU+Xlff1ANATIGk0k9j[0m
[0;32m[0m[0;32m+pwlCCRT8AKnCgHNPLsBA2RF7SOp6AsDT6ygBJlh0wcBzIm2Tlf05fbsq4/aC4yyX[0m
[0;32m[0m[0;32m+X04fkZT6/iyj2HYauE2yOE+b+h1IYHkm4vP9qdCa6HCPSXrW5b0KDtst842/6+Ok[0m
[0;32m[0m[0;32m+fcvHlXHo2qN8xcL4dJIEG4aspCJTQLas/kx2z/uUMsA1n3Y/buWQbqCmJqK4LL7R[0m
[0;32m[0m[0;32m+K4X9p2jIugErsWx0Hbhzlefut8cl8ABMALJ+tguLHPPAUJ4lueAI3jZm/zel0btU[0m
[0;32m[0m[0;32m+ZCzJJ7VLkn5l/9Mt4blOvH+kQSGQQXemOR/qnuOf0GZvBeyqdn6/axag67XH/JJU[0m
[0;32m[0m[0;32m+LysRJyU3eExRarDzzFhdFPFqSBX/wge2sY0PjlxQRrM9vwGYT7JZVEc+NHt4bVaT[0m
[0;32m[0m[0;32m+LnPqZih4zR0Uv6CPLy64Lo7yFIrM6bV8+2ydDKXhlg==[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2025-09-09 06:57:52,370 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:52,381 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Create TLS secret for Rancher ingress] ***********************************************************************************************************************
2025-09-09 06:57:52,897 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:52,913 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Create CA secret for Rancher] ********************************************************************************************************************************
2025-09-09 06:57:53,381 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:53,396 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Verify secrets creation] *************************************************************************************************************************************
2025-09-09 06:57:53,907 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:53,918 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Install Rancher with Helm] ***********************************************************************************************************************************
2025-09-09 06:57:55,567 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:57:55,577 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Wait for Rancher to be ready] ********************************************************************************************************************************
2025-09-09 06:59:24,689 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:59:24,701 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Check Rancher pod status] ************************************************************************************************************************************
2025-09-09 06:59:25,252 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:59:25,264 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Display Rancher pod status] **********************************************************************************************************************************
2025-09-09 06:59:25,293 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "rancher_pods.stdout_lines": [
        "NAME                       READY   STATUS    RESTARTS      AGE",
        "rancher-6bd7dbdb77-8lf5s   1/1     Running   0             90s",
        "rancher-6bd7dbdb77-gwms4   1/1     Running   1 (23s ago)   90s",
        "rancher-6bd7dbdb77-rbf5p   1/1     Running   1 (21s ago)   90s"
    ]
}
2025-09-09 06:59:25,306 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Check Rancher service status] ********************************************************************************************************************************
2025-09-09 06:59:25,952 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 06:59:25,967 p=1700635 u=root n=ansible | TASK [master1_helm_cert_manager_install : Display Rancher service status] ******************************************************************************************************************************
2025-09-09 06:59:25,997 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "rancher_svc.stdout_lines": [
        "NAME      TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE",
        "rancher   ClusterIP   10.43.188.179   <none>        80/TCP,443/TCP   90s"
    ]
}
2025-09-09 06:59:26,032 p=1700635 u=root n=ansible | PLAY [masters] *****************************************************************************************************************************************************************************************
2025-09-09 06:59:26,063 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Wait for Rancher cluster to be fully ready] *****************************************************************************************************************************
2025-09-09 06:59:26,093 p=1702446 u=root n=ansible | Pausing for 280 seconds
2025-09-09 06:59:26,093 p=1702446 u=root n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-09-09 07:04:06,096 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:06,114 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Get Rancher API token] **************************************************************************************************************************************************
2025-09-09 07:04:06,745 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:06,770 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Set Rancher server URL (completa setup iniziale)] ***********************************************************************************************************************
2025-09-09 07:04:07,138 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:07,157 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Accept Rancher EULA] ****************************************************************************************************************************************************
2025-09-09 07:04:07,498 p=1700635 u=root n=ansible | fatal: [cornelio.app.iac-svil.almaviva.it -> localhost]: FAILED! => {"cache_control": "no-cache, no-store, must-revalidate", "changed": false, "connection": "close", "content_length": "111", "content_type": "application/json", "date": "Tue, 09 Sep 2025 05:10:26 GMT", "elapsed": 0, "expires": "Wed 24 Feb 1982 18:42:00 GMT", "json": {"baseType": "error", "code": "MethodNotAllow", "message": "Method POST not supported", "status": 405, "type": "error"}, "msg": "Status code was 405 and not [200, 204, 409]: HTTP Error 405: Method Not Allowed", "redirected": false, "status": 405, "strict_transport_security": "max-age=31536000; includeSubDomains", "url": "https://rancher.asl.brindisi.it/v3/setting/first-login", "x_api_cattle_auth": "true", "x_api_schemas": "https://rancher.asl.brindisi.it/v3/schemas", "x_content_type_options": "nosniff"}
2025-09-09 07:04:07,498 p=1700635 u=root n=ansible | ...ignoring
2025-09-09 07:04:07,517 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Create a new Kubernetes RKE2 custom cluster via Rancher API] ************************************************************************************************************
2025-09-09 07:04:07,902 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:07,915 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Show cluster creation result] *******************************************************************************************************************************************
2025-09-09 07:04:07,959 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "create_cluster_result.json": {
        "apiVersion": "provisioning.cattle.io/v1",
        "id": "fleet-default/brindisicoll",
        "kind": "Cluster",
        "links": {
            "patch": "https://rancher.asl.brindisi.it/v1/provisioning.cattle.io.clusters/fleet-default/brindisicoll",
            "remove": "https://rancher.asl.brindisi.it/v1/provisioning.cattle.io.clusters/fleet-default/brindisicoll",
            "self": "https://rancher.asl.brindisi.it/v1/provisioning.cattle.io.clusters/fleet-default/brindisicoll",
            "update": "https://rancher.asl.brindisi.it/v1/provisioning.cattle.io.clusters/fleet-default/brindisicoll",
            "view": "https://rancher.asl.brindisi.it/apis/provisioning.cattle.io/v1/namespaces/fleet-default/clusters/brindisicoll"
        },
        "metadata": {
            "annotations": {
                "field.cattle.io/creatorId": "user-bnzqc"
            },
            "creationTimestamp": "2025-09-09T05:10:26Z",
            "fields": [
                "brindisicoll",
                null,
                null
            ],
            "generation": 1,
            "managedFields": [
                {
                    "apiVersion": "provisioning.cattle.io/v1",
                    "fieldsType": "FieldsV1",
                    "fieldsV1": {
                        "f:spec": {
                            ".": {},
                            "f:defaultClusterRoleForProjectMembers": {},
                            "f:defaultPodSecurityAdmissionConfigurationTemplateName": {},
                            "f:enableNetworkPolicy": {},
                            "f:kubernetesVersion": {},
                            "f:rkeConfig": {
                                ".": {},
                                "f:etcd": {
                                    ".": {},
                                    "f:disableSnapshots": {},
                                    "f:snapshotRetention": {},
                                    "f:snapshotScheduleCron": {}
                                },
                                "f:machineGlobalConfig": {
                                    ".": {},
                                    "f:cni": {},
                                    "f:disable-kube-proxy": {},
                                    "f:etcd-expose-metrics": {}
                                },
                                "f:machineSelectorConfig": {},
                                "f:registries": {},
                                "f:upgradeStrategy": {
                                    ".": {},
                                    "f:controlPlaneConcurrency": {},
                                    "f:controlPlaneDrainOptions": {
                                        ".": {},
                                        "f:enabled": {},
                                        "f:force": {},
                                        "f:ignoreDaemonSets": {},
                                        "f:timeout": {}
                                    },
                                    "f:workerConcurrency": {},
                                    "f:workerDrainOptions": {
                                        ".": {},
                                        "f:enabled": {},
                                        "f:force": {},
                                        "f:ignoreDaemonSets": {},
                                        "f:timeout": {}
                                    }
                                }
                            }
                        }
                    },
                    "manager": "rancher",
                    "operation": "Update",
                    "time": "2025-09-09T05:10:26Z"
                }
            ],
            "name": "brindisicoll",
            "namespace": "fleet-default",
            "relationships": null,
            "resourceVersion": "5908",
            "state": {
                "error": false,
                "message": "Resource is current",
                "name": "active",
                "transitioning": false
            },
            "uid": "2bbb34e5-5424-49ac-a4d9-7317e56d215f"
        },
        "spec": {
            "defaultClusterRoleForProjectMembers": "",
            "defaultPodSecurityAdmissionConfigurationTemplateName": "",
            "enableNetworkPolicy": false,
            "kubernetesVersion": "v1.31.11+rke2r1",
            "rkeConfig": {
                "etcd": {
                    "disableSnapshots": false,
                    "snapshotRetention": 5,
                    "snapshotScheduleCron": "0 */5 * * *"
                },
                "machineGlobalConfig": {
                    "cni": "canal",
                    "disable-kube-proxy": false,
                    "etcd-expose-metrics": false
                },
                "machineSelectorConfig": [
                    {
                        "config": {
                            "protect-kernel-defaults": false
                        }
                    }
                ],
                "registries": {},
                "upgradeStrategy": {
                    "controlPlaneConcurrency": "1",
                    "controlPlaneDrainOptions": {
                        "enabled": false,
                        "force": false,
                        "ignoreDaemonSets": true,
                        "timeout": 120
                    },
                    "workerConcurrency": "1",
                    "workerDrainOptions": {
                        "enabled": false,
                        "force": false,
                        "ignoreDaemonSets": true,
                        "timeout": 120
                    }
                }
            }
        },
        "type": "provisioning.cattle.io.cluster"
    }
}
2025-09-09 07:04:07,978 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Wait for cluster to be provisioned] *************************************************************************************************************************************
2025-09-09 07:04:08,475 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:08,494 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Get cluster ID from legacy API for registration token] ******************************************************************************************************************
2025-09-09 07:04:08,874 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:08,891 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Debug cluster info] *****************************************************************************************************************************************************
2025-09-09 07:04:08,934 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "legacy_cluster_info.json": {
        "actions": {
            "createFromTemplate": "https://rancher.asl.brindisi.it/v3/clusters?action=createFromTemplate"
        },
        "createTypes": {
            "cluster": "https://rancher.asl.brindisi.it/v3/clusters"
        },
        "data": [
            {
                "actions": {
                    "generateKubeconfig": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd?action=generateKubeconfig",
                    "importYaml": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd?action=importYaml"
                },
                "agentImage": "",
                "agentImageOverride": "",
                "aksStatus": {
                    "privateRequiresTunnel": null,
                    "rbacEnabled": null,
                    "type": "/v3/schemas/aksStatus",
                    "upstreamSpec": null
                },
                "annotations": {
                    "authz.management.cattle.io/creator-role-bindings": "{\"created\":[\"cluster-owner\"],\"required\":[\"cluster-owner\"]}",
                    "authz.management.cattle.io/initial-sync": "true",
                    "lifecycle.cattle.io/create.cluster-agent-controller-cleanup": "true",
                    "objectset.rio.cattle.io/applied": "H4sIAAAAAAAA/4xSwW7bSgz8lQeeJcVW/NxGQA9F0ENQIA3Qoj1Tu5TNesVVuJSNNMi/FysriREkQU/CUhxyZjj3gAP/JE0cBRroUXBDPYlVDs0CVRzP9udQwI7FQwOXYUxGCgX0ZOjREJp7QJFoaBwl5WfHFPzJAKeEFvUqDxgTadnKn1sHBcT2NzlLZJVyPAFw7nTHVeWEpne640FIy81+Bw0MGvecxbBsTiUsi/++svhPz/zfnybYEzTQKovnxC6G8E+YNKDLwC4QWempwzEYFG/xQt+zcDJFo6zZdKS3u5+vUz6a4zkNAe9e5ftQwOQdR/nBPSXDfoBGxhAKCNhSmI71lqYtpi008MFfrNG1/1/UH6ldu3O3XK3bNdbreoHn9epi0S38sltT3jaTcGVf6irUt1vzuZwGclNKNiR21eOGvu1JlX1uhgJQ0oE0k8mMj8K+k1OyueYpOeXBjhmFqcBK/vPTQGhAUdyW9Gz+ltO2Zl9Xy2VVn2BG276E7MaWShy4xNG2zX5R1dUqI47eXr8aBRJsA12THaLubmJgdwdNhyFRcTz+r6i7KQ0z/mUiuB+iGvnLKB1vsj+ZxuMLsnEsRioYngaH6DDMEc5CvogfIotl9JGQn3sfCjiw+HhIN0odKfnH5M//H/4GAAD//yMzzjz6AwAA",
                    "objectset.rio.cattle.io/id": "cluster-create",
                    "objectset.rio.cattle.io/owner-gvk": "provisioning.cattle.io/v1, Kind=Cluster",
                    "objectset.rio.cattle.io/owner-name": "brindisicoll",
                    "objectset.rio.cattle.io/owner-namespace": "fleet-default",
                    "provisioning.cattle.io/administrated": "true",
                    "provisioning.cattle.io/management-cluster-display-name": "brindisicoll"
                },
                "answers": {
                    "clusterId": null,
                    "projectId": null,
                    "type": "/v3/schemas/answer"
                },
                "appliedEnableNetworkPolicy": false,
                "appliedSpec": {
                    "agentImageOverride": "",
                    "answers": {
                        "clusterId": null,
                        "projectId": null,
                        "type": "/v3/schemas/answer"
                    },
                    "clusterSecrets": {
                        "type": "/v3/schemas/clusterSecrets"
                    },
                    "clusterTemplateId": null,
                    "clusterTemplateRevisionId": null,
                    "defaultClusterRoleForProjectMembers": null,
                    "description": "",
                    "desiredAgentImage": "",
                    "desiredAuthImage": "",
                    "displayName": "",
                    "dockerRootDir": "/var/lib/docker",
                    "enableNetworkPolicy": null,
                    "internal": false,
                    "localClusterAuthEndpoint": {
                        "enabled": false,
                        "type": "/v3/schemas/localClusterAuthEndpoint"
                    },
                    "type": "/v3/schemas/clusterSpec",
                    "windowsPreferedCluster": false
                },
                "authImage": "",
                "baseType": "cluster",
                "capabilities": {
                    "loadBalancerCapabilities": {
                        "healthCheckSupported": false,
                        "type": "/v3/schemas/loadBalancerCapabilities"
                    },
                    "nodePoolScalingSupported": false,
                    "type": "/v3/schemas/capabilities"
                },
                "clusterSecrets": {
                    "type": "/v3/schemas/clusterSecrets"
                },
                "clusterTemplateId": null,
                "clusterTemplateRevisionId": null,
                "conditions": [
                    {
                        "lastUpdateTime": "2025-09-09T05:10:27Z",
                        "status": "True",
                        "type": "BackingNamespaceCreated"
                    },
                    {
                        "lastUpdateTime": "2025-09-09T05:10:27Z",
                        "status": "True",
                        "type": "DefaultProjectCreated"
                    },
                    {
                        "lastUpdateTime": "2025-09-09T05:10:27Z",
                        "status": "True",
                        "type": "SystemProjectCreated"
                    },
                    {
                        "lastUpdateTime": "2025-09-09T05:10:27Z",
                        "status": "True",
                        "type": "InitialRolesPopulated"
                    },
                    {
                        "lastUpdateTime": "2025-09-09T05:10:27Z",
                        "message": "waiting for at least one control plane, etcd, and worker node to be registered",
                        "reason": "Waiting",
                        "status": "Unknown",
                        "type": "Updated"
                    },
                    {
                        "lastUpdateTime": "2025-09-09T05:10:27Z",
                        "status": "True",
                        "type": "CreatorMadeOwner"
                    }
                ],
                "created": "2025-09-09T05:10:26Z",
                "createdTS": 1757394626000,
                "creatorId": "user-bnzqc",
                "defaultClusterRoleForProjectMembers": null,
                "description": "",
                "desiredAgentImage": "rancher/rancher-agent:v2.11.2",
                "desiredAuthImage": "rancher/kube-api-auth:v0.2.4",
                "dockerRootDir": "/var/lib/docker",
                "driver": "",
                "eksStatus": {
                    "generatedNodeRole": "",
                    "managedLaunchTemplateID": "",
                    "managedLaunchTemplateVersions": null,
                    "privateRequiresTunnel": null,
                    "securityGroups": null,
                    "subnets": null,
                    "type": "/v3/schemas/eksStatus",
                    "upstreamSpec": null,
                    "virtualNetwork": ""
                },
                "enableNetworkPolicy": false,
                "fleetWorkspaceName": "fleet-default",
                "gkeStatus": {
                    "privateRequiresTunnel": null,
                    "type": "/v3/schemas/gkeStatus",
                    "upstreamSpec": null
                },
                "id": "c-m-r4l2qhtd",
                "importedConfig": {
                    "type": "/v3/schemas/importedConfig"
                },
                "internal": false,
                "istioEnabled": false,
                "labels": {
                    "objectset.rio.cattle.io/hash": "7d96acb5928eb6c3c146b6a2620a32490f0d1f6e"
                },
                "links": {
                    "apiServices": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/apiservices",
                    "clusterRegistrationTokens": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/clusterregistrationtokens",
                    "clusterRoleTemplateBindings": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/clusterroletemplatebindings",
                    "etcdBackups": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/etcdbackups",
                    "namespaces": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/namespaces",
                    "nodePools": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/nodepools",
                    "nodes": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/nodes",
                    "persistentVolumes": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/persistentvolumes",
                    "projects": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/projects",
                    "remove": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd",
                    "self": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd",
                    "shell": "wss://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd?shell=true",
                    "storageClasses": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/storageclasses",
                    "subscribe": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/subscribe",
                    "tokens": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd/tokens",
                    "update": "https://rancher.asl.brindisi.it/v3/clusters/c-m-r4l2qhtd"
                },
                "linuxWorkerCount": 0,
                "localClusterAuthEndpoint": {
                    "enabled": false,
                    "type": "/v3/schemas/localClusterAuthEndpoint"
                },
                "name": "brindisicoll",
                "nodeCount": 0,
                "nodeVersion": 0,
                "provider": "",
                "state": "updating",
                "transitioning": "yes",
                "transitioningMessage": "waiting for at least one control plane, etcd, and worker node to be registered",
                "type": "cluster",
                "uuid": "0eb43039-8a38-4767-8fbc-76553a551267",
                "windowsPreferedCluster": false,
                "windowsWorkerCount": 0
            }
        ],
        "filters": {
            "aadClientCertSecret": null,
            "aadClientSecret": null,
            "agentImage": null,
            "agentImageOverride": null,
            "apiEndpoint": null,
            "appliedEnableNetworkPolicy": null,
            "authImage": null,
            "caCert": null,
            "clusterTemplateId": null,
            "clusterTemplateRevisionId": null,
            "created": null,
            "creatorId": null,
            "currentCisRunName": null,
            "defaultClusterRoleForProjectMembers": null,
            "defaultPodSecurityAdmissionConfigurationTemplateName": null,
            "description": null,
            "desiredAgentImage": null,
            "desiredAuthImage": null,
            "dockerRootDir": null,
            "driver": null,
            "enableNetworkPolicy": null,
            "fleetWorkspaceName": null,
            "id": null,
            "internal": null,
            "istioEnabled": null,
            "linuxWorkerCount": null,
            "name": [
                {
                    "modifier": "eq",
                    "value": "brindisicoll"
                }
            ],
            "nodeCount": null,
            "nodeVersion": null,
            "openStackSecret": null,
            "privateRegistrySecret": null,
            "provider": null,
            "removed": null,
            "s3CredentialSecret": null,
            "serviceAccountTokenSecret": null,
            "state": null,
            "transitioning": null,
            "transitioningMessage": null,
            "uuid": null,
            "virtualCenterSecret": null,
            "vsphereSecret": null,
            "weavePasswordSecret": null,
            "windowsPreferedCluster": null,
            "windowsWorkerCount": null
        },
        "links": {
            "self": "https://rancher.asl.brindisi.it/v3/clusters"
        },
        "pagination": {
            "limit": 1000,
            "total": 1
        },
        "resourceType": "cluster",
        "sort": {
            "links": {
                "aadClientCertSecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=aadClientCertSecret",
                "aadClientSecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=aadClientSecret",
                "agentImage": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=agentImage",
                "agentImageOverride": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=agentImageOverride",
                "apiEndpoint": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=apiEndpoint",
                "authImage": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=authImage",
                "caCert": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=caCert",
                "currentCisRunName": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=currentCisRunName",
                "defaultPodSecurityAdmissionConfigurationTemplateName": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=defaultPodSecurityAdmissionConfigurationTemplateName",
                "description": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=description",
                "desiredAgentImage": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=desiredAgentImage",
                "desiredAuthImage": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=desiredAuthImage",
                "dockerRootDir": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=dockerRootDir",
                "driver": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=driver",
                "fleetWorkspaceName": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=fleetWorkspaceName",
                "openStackSecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=openStackSecret",
                "privateRegistrySecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=privateRegistrySecret",
                "provider": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=provider",
                "s3CredentialSecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=s3CredentialSecret",
                "serviceAccountTokenSecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=serviceAccountTokenSecret",
                "state": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=state",
                "transitioning": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=transitioning",
                "transitioningMessage": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=transitioningMessage",
                "uuid": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=uuid",
                "virtualCenterSecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=virtualCenterSecret",
                "vsphereSecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=vsphereSecret",
                "weavePasswordSecret": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&sort=weavePasswordSecret"
            },
            "order": "asc",
            "reverse": "https://rancher.asl.brindisi.it/v3/clusters?name=brindisicoll&order=desc"
        },
        "type": "collection"
    }
}
2025-09-09 07:04:08,965 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Get or create cluster registration token] *******************************************************************************************************************************
2025-09-09 07:04:09,349 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:09,366 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Wait for registration token to be ready] ********************************************************************************************************************************
2025-09-09 07:04:09,736 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:09,749 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Show cluster status] ****************************************************************************************************************************************************
2025-09-09 07:04:09,777 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "msg": "Cluster creato con successo!\nNome: brindisicoll\nID: brindisicoll\nNamespace: fleet-default\nKubernetes Version: v1.31.11+rke2r1\n"
}
2025-09-09 07:04:09,789 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Debug registration token] ***********************************************************************************************************************************************
2025-09-09 07:04:09,820 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "token_list.json.data[0]": {
        "annotations": {},
        "baseType": "clusterRegistrationToken",
        "clusterId": "c-m-r4l2qhtd",
        "command": "kubectl apply -f https://rancher.asl.brindisi.it/v3/import/pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx_c-m-r4l2qhtd.yaml",
        "created": "2025-09-09T05:10:28Z",
        "createdTS": 1757394628000,
        "creatorId": "user-bnzqc",
        "id": "c-m-r4l2qhtd:crt-6bn9r",
        "insecureCommand": "curl --insecure -sfL https://rancher.asl.brindisi.it/v3/import/pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx_c-m-r4l2qhtd.yaml | kubectl apply -f -",
        "insecureNodeCommand": " curl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sudo  sh -s - --server https://rancher.asl.brindisi.it --label 'cattle.io/os=linux' --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx --ca-checksum 2e1b29ee6ec8df981f3fb14e0c33a915b56e2656fc65de3ade8ac9550023a5c2",
        "insecureWindowsNodeCommand": " curl.exe --insecure -fL https://rancher.asl.brindisi.it/wins-agent-install.ps1 -o install.ps1; Set-ExecutionPolicy Bypass -Scope Process -Force; ./install.ps1 -Server https://rancher.asl.brindisi.it -Label 'cattle.io/os=windows' -Token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx -Worker -CaChecksum 2e1b29ee6ec8df981f3fb14e0c33a915b56e2656fc65de3ade8ac9550023a5c2",
        "labels": {
            "cattle.io/creator": "norman"
        },
        "links": {
            "remove": "https://rancher.asl.brindisi.it/v3/clusterRegistrationTokens/c-m-r4l2qhtd:crt-6bn9r",
            "self": "https://rancher.asl.brindisi.it/v3/clusterRegistrationTokens/c-m-r4l2qhtd:crt-6bn9r",
            "update": "https://rancher.asl.brindisi.it/v3/clusterRegistrationTokens/c-m-r4l2qhtd:crt-6bn9r"
        },
        "manifestUrl": "https://rancher.asl.brindisi.it/v3/import/pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx_c-m-r4l2qhtd.yaml",
        "name": "crt-6bn9r",
        "namespaceId": null,
        "nodeCommand": " curl -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sudo  sh -s - --server https://rancher.asl.brindisi.it --label 'cattle.io/os=linux' --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx --ca-checksum 2e1b29ee6ec8df981f3fb14e0c33a915b56e2656fc65de3ade8ac9550023a5c2",
        "state": "active",
        "token": "pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx",
        "transitioning": "no",
        "transitioningMessage": "",
        "type": "clusterRegistrationToken",
        "uuid": "e206494a-cb5c-4c7f-92f5-3dc5af31c738",
        "windowsNodeCommand": " curl.exe -fL https://rancher.asl.brindisi.it/wins-agent-install.ps1 -o install.ps1; Set-ExecutionPolicy Bypass -Scope Process -Force; ./install.ps1 -Server https://rancher.asl.brindisi.it -Label 'cattle.io/os=windows' -Token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx -Worker -CaChecksum 2e1b29ee6ec8df981f3fb14e0c33a915b56e2656fc65de3ade8ac9550023a5c2"
    }
}
2025-09-09 07:04:09,832 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Extract registration details] *******************************************************************************************************************************************
2025-09-09 07:04:09,877 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 07:04:09,889 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Extract token from nodeCommand] *****************************************************************************************************************************************
2025-09-09 07:04:09,930 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it]
2025-09-09 07:04:09,941 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Debug extracted values] *************************************************************************************************************************************************
2025-09-09 07:04:09,972 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "msg": "Rancher Host: rancher.asl.brindisi.it\nCluster Token: pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx\nNode Command:  curl -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sudo  sh -s - --server https://rancher.asl.brindisi.it --label 'cattle.io/os=linux' --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx --ca-checksum 2e1b29ee6ec8df981f3fb14e0c33a915b56e2656fc65de3ade8ac9550023a5c2\n"
}
2025-09-09 07:04:09,999 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Install system-agent and join nodes as managers] ************************************************************************************************************************
2025-09-09 07:04:11,273 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-manager2(10.116.82.133)] => (item=rke2-manager2)
2025-09-09 07:04:11,327 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Install system-agent and join nodes as workers] *************************************************************************************************************************
2025-09-09 07:04:12,379 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-worker1(10.116.82.132)] => (item=rke2-worker1)
2025-09-09 07:04:13,296 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-worker2(10.116.82.135)] => (item=rke2-worker2)
2025-09-09 07:04:14,288 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-worker3(10.116.82.138)] => (item=rke2-worker3)
2025-09-09 07:04:14,323 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Install system-agent and join nodes as ingress] *************************************************************************************************************************
2025-09-09 07:04:15,319 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-ingress01(10.116.82.140)] => (item=rke2-ingress01)
2025-09-09 07:04:16,387 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-ingress02(10.116.82.141)] => (item=rke2-ingress02)
2025-09-09 07:04:16,412 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Wait for manager nodes join to complete] ********************************************************************************************************************************
2025-09-09 07:04:16,932 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-manager2(10.116.82.133)] => (item={'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '94920048780.53398', 'results_file': '/root/.ansible_async/94920048780.53398', 'changed': True, 'item': 'rke2-manager2', 'ansible_loop_var': 'item'})
2025-09-09 07:04:16,992 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Wait for worker nodes join to complete] *********************************************************************************************************************************
2025-09-09 07:04:17,393 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-worker1(10.116.82.132)] => (item={'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '628501116916.3403129', 'results_file': '/root/.ansible_async/628501116916.3403129', 'changed': True, 'item': 'rke2-worker1', 'ansible_loop_var': 'item'})
2025-09-09 07:04:17,697 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-worker2(10.116.82.135)] => (item={'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '623342774894.3564', 'results_file': '/root/.ansible_async/623342774894.3564', 'changed': True, 'item': 'rke2-worker2', 'ansible_loop_var': 'item'})
2025-09-09 07:04:18,006 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-worker3(10.116.82.138)] => (item={'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '962567726114.3976', 'results_file': '/root/.ansible_async/962567726114.3976', 'changed': True, 'item': 'rke2-worker3', 'ansible_loop_var': 'item'})
2025-09-09 07:04:18,041 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Wait for ingress nodes join to complete] ********************************************************************************************************************************
2025-09-09 07:04:18,379 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-ingress01(10.116.82.140)] => (item={'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '657889765004.3705', 'results_file': '/root/.ansible_async/657889765004.3705', 'changed': True, 'item': 'rke2-ingress01', 'ansible_loop_var': 'item'})
2025-09-09 07:04:18,699 p=1700635 u=root n=ansible | changed: [cornelio.app.iac-svil.almaviva.it -> rke2-ingress02(10.116.82.141)] => (item={'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '723225820264.3643', 'results_file': '/root/.ansible_async/723225820264.3643', 'changed': True, 'item': 'rke2-ingress02', 'ansible_loop_var': 'item'})
2025-09-09 07:04:18,712 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Show manager nodes join results] ****************************************************************************************************************************************
2025-09-09 07:04:18,760 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => (item={'started': 1, 'finished': 1, 'stdout': '[INFO]  Label: cattle.io/os=linux\n[INFO]  Role requested: etcd\n[INFO]  Role requested: controlplane\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service', 'stderr': '  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  2055k      0 --:--:-- --:--:-- --:--:-- 2192k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.', 'stdout_lines': ['[INFO]  Label: cattle.io/os=linux', '[INFO]  Role requested: etcd', '[INFO]  Role requested: controlplane', '[INFO]  CA strict verification is set to true', '[INFO]  Using default agent configuration directory /etc/rancher/agent', '[INFO]  Using default agent var directory /var/lib/rancher/agent', '[INFO]  Successfully downloaded CA certificate', '[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate', '[INFO]  Successfully tested Rancher connection', '[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64', '[INFO]  Successfully downloaded the rancher-system-agent binary.', '[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh', '[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.', '[INFO]  Generating Cattle ID', '[INFO]  Successfully downloaded Rancher connection information', '[INFO]  systemd: Creating service file', '[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env', '[INFO]  Enabling rancher-system-agent.service', '[INFO]  Starting/restarting rancher-system-agent.service'], 'stderr_lines': ['  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current', '                                 Dload  Upload   Total   Spent    Left  Speed', '', '  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0', '100 33684    0 33684    0     0  2055k      0 --:--:-- --:--:-- --:--:-- 2192k', 'Created symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.'], 'ansible_job_id': '94920048780.53398', 'results_file': '/root/.ansible_async/94920048780.53398', 'changed': True, 'rc': 0, 'cmd': "# Download and install system-agent for manager nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --etcd --controlplane\n", 'start': '2025-09-09 05:10:30.422246', 'end': '2025-09-09 05:10:32.207356', 'delta': '0:00:01.785110', 'msg': '', 'invocation': {'module_args': {'executable': '/bin/bash', '_raw_params': "# Download and install system-agent for manager nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --etcd --controlplane\n", '_uses_shell': True, 'warn': False, 'stdin_add_newline': True, 'strip_empty_ends': True, 'argv': None, 'chdir': None, 'creates': None, 'removes': None, 'stdin': None}}, 'failed': False, 'attempts': 1, 'item': {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '94920048780.53398', 'results_file': '/root/.ansible_async/94920048780.53398', 'changed': True, 'item': 'rke2-manager2', 'ansible_loop_var': 'item'}, 'ansible_loop_var': 'item'}) => {
    "msg": "Manager Node: {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '94920048780.53398', 'results_file': '/root/.ansible_async/94920048780.53398', 'changed': True, 'item': 'rke2-manager2', 'ansible_loop_var': 'item'}\nStatus: Success\nOutput: [INFO]  Label: cattle.io/os=linux\n[INFO]  Role requested: etcd\n[INFO]  Role requested: controlplane\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service\nError:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  2055k      0 --:--:-- --:--:-- --:--:-- 2192k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.\n"
}
2025-09-09 07:04:18,774 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Show worker nodes join results] *****************************************************************************************************************************************
2025-09-09 07:04:18,818 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => (item={'started': 1, 'finished': 1, 'stdout': '[INFO]  Label: cattle.io/os=linux\n[INFO]  Role requested: worker\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service', 'stderr': '  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  2349k      0 --:--:-- --:--:-- --:--:-- 2349k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.', 'stdout_lines': ['[INFO]  Label: cattle.io/os=linux', '[INFO]  Role requested: worker', '[INFO]  CA strict verification is set to true', '[INFO]  Using default agent configuration directory /etc/rancher/agent', '[INFO]  Using default agent var directory /var/lib/rancher/agent', '[INFO]  Successfully downloaded CA certificate', '[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate', '[INFO]  Successfully tested Rancher connection', '[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64', '[INFO]  Successfully downloaded the rancher-system-agent binary.', '[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh', '[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.', '[INFO]  Generating Cattle ID', '[INFO]  Successfully downloaded Rancher connection information', '[INFO]  systemd: Creating service file', '[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env', '[INFO]  Enabling rancher-system-agent.service', '[INFO]  Starting/restarting rancher-system-agent.service'], 'stderr_lines': ['  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current', '                                 Dload  Upload   Total   Spent    Left  Speed', '', '  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0', '100 33684    0 33684    0     0  2349k      0 --:--:-- --:--:-- --:--:-- 2349k', 'Created symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.'], 'ansible_job_id': '628501116916.3403129', 'results_file': '/root/.ansible_async/628501116916.3403129', 'changed': True, 'rc': 0, 'cmd': "# Download and install system-agent for worker nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker\n", 'start': '2025-09-09 07:10:31.535645', 'end': '2025-09-09 07:10:33.260505', 'delta': '0:00:01.724860', 'msg': '', 'invocation': {'module_args': {'executable': '/bin/bash', '_raw_params': "# Download and install system-agent for worker nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker\n", '_uses_shell': True, 'warn': False, 'stdin_add_newline': True, 'strip_empty_ends': True, 'argv': None, 'chdir': None, 'creates': None, 'removes': None, 'stdin': None}}, 'failed': False, 'attempts': 1, 'item': {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '628501116916.3403129', 'results_file': '/root/.ansible_async/628501116916.3403129', 'changed': True, 'item': 'rke2-worker1', 'ansible_loop_var': 'item'}, 'ansible_loop_var': 'item'}) => {
    "msg": "Worker Node: {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '628501116916.3403129', 'results_file': '/root/.ansible_async/628501116916.3403129', 'changed': True, 'item': 'rke2-worker1', 'ansible_loop_var': 'item'}\nStatus: Success\nOutput: [INFO]  Label: cattle.io/os=linux\n[INFO]  Role requested: worker\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service\nError:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  2349k      0 --:--:-- --:--:-- --:--:-- 2349k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.\n"
}
2025-09-09 07:04:18,832 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => (item={'started': 1, 'finished': 1, 'stdout': '[INFO]  Label: cattle.io/os=linux\n[INFO]  Role requested: worker\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service', 'stderr': '  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0   996k      0 --:--:-- --:--:-- --:--:--  967k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.', 'stdout_lines': ['[INFO]  Label: cattle.io/os=linux', '[INFO]  Role requested: worker', '[INFO]  CA strict verification is set to true', '[INFO]  Using default agent configuration directory /etc/rancher/agent', '[INFO]  Using default agent var directory /var/lib/rancher/agent', '[INFO]  Successfully downloaded CA certificate', '[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate', '[INFO]  Successfully tested Rancher connection', '[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64', '[INFO]  Successfully downloaded the rancher-system-agent binary.', '[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh', '[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.', '[INFO]  Generating Cattle ID', '[INFO]  Successfully downloaded Rancher connection information', '[INFO]  systemd: Creating service file', '[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env', '[INFO]  Enabling rancher-system-agent.service', '[INFO]  Starting/restarting rancher-system-agent.service'], 'stderr_lines': ['  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current', '                                 Dload  Upload   Total   Spent    Left  Speed', '', '  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0', '  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0', '100 33684    0 33684    0     0   996k      0 --:--:-- --:--:-- --:--:--  967k', 'Created symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.'], 'ansible_job_id': '623342774894.3564', 'results_file': '/root/.ansible_async/623342774894.3564', 'changed': True, 'rc': 0, 'cmd': "# Download and install system-agent for worker nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker\n", 'start': '2025-09-09 07:10:32.443443', 'end': '2025-09-09 07:10:34.344634', 'delta': '0:00:01.901191', 'msg': '', 'invocation': {'module_args': {'executable': '/bin/bash', '_raw_params': "# Download and install system-agent for worker nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker\n", '_uses_shell': True, 'warn': False, 'stdin_add_newline': True, 'strip_empty_ends': True, 'argv': None, 'chdir': None, 'creates': None, 'removes': None, 'stdin': None}}, 'failed': False, 'attempts': 1, 'item': {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '623342774894.3564', 'results_file': '/root/.ansible_async/623342774894.3564', 'changed': True, 'item': 'rke2-worker2', 'ansible_loop_var': 'item'}, 'ansible_loop_var': 'item'}) => {
    "msg": "Worker Node: {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '623342774894.3564', 'results_file': '/root/.ansible_async/623342774894.3564', 'changed': True, 'item': 'rke2-worker2', 'ansible_loop_var': 'item'}\nStatus: Success\nOutput: [INFO]  Label: cattle.io/os=linux\n[INFO]  Role requested: worker\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service\nError:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0   996k      0 --:--:-- --:--:-- --:--:--  967k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.\n"
}
2025-09-09 07:04:18,847 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => (item={'started': 1, 'finished': 1, 'stdout': '[INFO]  Label: cattle.io/os=linux\n[INFO]  Role requested: worker\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service', 'stderr': '  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  1134k      0 --:--:-- --:--:-- --:--:-- 1134k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.', 'stdout_lines': ['[INFO]  Label: cattle.io/os=linux', '[INFO]  Role requested: worker', '[INFO]  CA strict verification is set to true', '[INFO]  Using default agent configuration directory /etc/rancher/agent', '[INFO]  Using default agent var directory /var/lib/rancher/agent', '[INFO]  Successfully downloaded CA certificate', '[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate', '[INFO]  Successfully tested Rancher connection', '[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64', '[INFO]  Successfully downloaded the rancher-system-agent binary.', '[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh', '[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.', '[INFO]  Generating Cattle ID', '[INFO]  Successfully downloaded Rancher connection information', '[INFO]  systemd: Creating service file', '[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env', '[INFO]  Enabling rancher-system-agent.service', '[INFO]  Starting/restarting rancher-system-agent.service'], 'stderr_lines': ['  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current', '                                 Dload  Upload   Total   Spent    Left  Speed', '', '  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0', '100 33684    0 33684    0     0  1134k      0 --:--:-- --:--:-- --:--:-- 1134k', 'Created symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.'], 'ansible_job_id': '962567726114.3976', 'results_file': '/root/.ansible_async/962567726114.3976', 'changed': True, 'rc': 0, 'cmd': "# Download and install system-agent for worker nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker\n", 'start': '2025-09-09 07:10:33.429953', 'end': '2025-09-09 07:10:35.286401', 'delta': '0:00:01.856448', 'msg': '', 'invocation': {'module_args': {'executable': '/bin/bash', '_raw_params': "# Download and install system-agent for worker nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker\n", '_uses_shell': True, 'warn': False, 'stdin_add_newline': True, 'strip_empty_ends': True, 'argv': None, 'chdir': None, 'creates': None, 'removes': None, 'stdin': None}}, 'failed': False, 'attempts': 1, 'item': {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '962567726114.3976', 'results_file': '/root/.ansible_async/962567726114.3976', 'changed': True, 'item': 'rke2-worker3', 'ansible_loop_var': 'item'}, 'ansible_loop_var': 'item'}) => {
    "msg": "Worker Node: {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '962567726114.3976', 'results_file': '/root/.ansible_async/962567726114.3976', 'changed': True, 'item': 'rke2-worker3', 'ansible_loop_var': 'item'}\nStatus: Success\nOutput: [INFO]  Label: cattle.io/os=linux\n[INFO]  Role requested: worker\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service\nError:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  1134k      0 --:--:-- --:--:-- --:--:-- 1134k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.\n"
}
2025-09-09 07:04:18,861 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Show ingress nodes join results] ****************************************************************************************************************************************
2025-09-09 07:04:18,906 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => (item={'started': 1, 'finished': 1, 'stdout': '[INFO]  Label: cattle.io/os=linux\n[INFO]  Label: app=ingress\n[INFO]  Role requested: worker\n[INFO]  Taint: app=ingress:NoSchedule\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service', 'stderr': '  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  1827k      0 --:--:-- --:--:-- --:--:-- 1827k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.', 'stdout_lines': ['[INFO]  Label: cattle.io/os=linux', '[INFO]  Label: app=ingress', '[INFO]  Role requested: worker', '[INFO]  Taint: app=ingress:NoSchedule', '[INFO]  CA strict verification is set to true', '[INFO]  Using default agent configuration directory /etc/rancher/agent', '[INFO]  Using default agent var directory /var/lib/rancher/agent', '[INFO]  Successfully downloaded CA certificate', '[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate', '[INFO]  Successfully tested Rancher connection', '[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64', '[INFO]  Successfully downloaded the rancher-system-agent binary.', '[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh', '[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.', '[INFO]  Generating Cattle ID', '[INFO]  Successfully downloaded Rancher connection information', '[INFO]  systemd: Creating service file', '[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env', '[INFO]  Enabling rancher-system-agent.service', '[INFO]  Starting/restarting rancher-system-agent.service'], 'stderr_lines': ['  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current', '                                 Dload  Upload   Total   Spent    Left  Speed', '', '  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0', '100 33684    0 33684    0     0  1827k      0 --:--:-- --:--:-- --:--:-- 1827k', 'Created symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.'], 'ansible_job_id': '657889765004.3705', 'results_file': '/root/.ansible_async/657889765004.3705', 'changed': True, 'rc': 0, 'cmd': "# Download and install system-agent for ingress nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --label 'app=ingress'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker  --taints 'app=ingress:NoSchedule'\n", 'start': '2025-09-09 07:10:34.503199', 'end': '2025-09-09 07:10:36.401354', 'delta': '0:00:01.898155', 'msg': '', 'invocation': {'module_args': {'executable': '/bin/bash', '_raw_params': "# Download and install system-agent for ingress nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --label 'app=ingress'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker  --taints 'app=ingress:NoSchedule'\n", '_uses_shell': True, 'warn': False, 'stdin_add_newline': True, 'strip_empty_ends': True, 'argv': None, 'chdir': None, 'creates': None, 'removes': None, 'stdin': None}}, 'failed': False, 'attempts': 1, 'item': {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '657889765004.3705', 'results_file': '/root/.ansible_async/657889765004.3705', 'changed': True, 'item': 'rke2-ingress01', 'ansible_loop_var': 'item'}, 'ansible_loop_var': 'item'}) => {
    "msg": "Ingress Node: {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '657889765004.3705', 'results_file': '/root/.ansible_async/657889765004.3705', 'changed': True, 'item': 'rke2-ingress01', 'ansible_loop_var': 'item'}\nStatus: Success\nOutput: [INFO]  Label: cattle.io/os=linux\n[INFO]  Label: app=ingress\n[INFO]  Role requested: worker\n[INFO]  Taint: app=ingress:NoSchedule\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service\nError:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  1827k      0 --:--:-- --:--:-- --:--:-- 1827k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.\n"
}
2025-09-09 07:04:18,920 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => (item={'started': 1, 'finished': 1, 'stdout': '[INFO]  Label: cattle.io/os=linux\n[INFO]  Label: app=ingress\n[INFO]  Role requested: worker\n[INFO]  Taint: app=ingress:NoSchedule\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service', 'stderr': '  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  1315k      0 --:--:-- --:--:-- --:--:-- 1315k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.', 'stdout_lines': ['[INFO]  Label: cattle.io/os=linux', '[INFO]  Label: app=ingress', '[INFO]  Role requested: worker', '[INFO]  Taint: app=ingress:NoSchedule', '[INFO]  CA strict verification is set to true', '[INFO]  Using default agent configuration directory /etc/rancher/agent', '[INFO]  Using default agent var directory /var/lib/rancher/agent', '[INFO]  Successfully downloaded CA certificate', '[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate', '[INFO]  Successfully tested Rancher connection', '[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64', '[INFO]  Successfully downloaded the rancher-system-agent binary.', '[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh', '[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.', '[INFO]  Generating Cattle ID', '[INFO]  Successfully downloaded Rancher connection information', '[INFO]  systemd: Creating service file', '[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env', '[INFO]  Enabling rancher-system-agent.service', '[INFO]  Starting/restarting rancher-system-agent.service'], 'stderr_lines': ['  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current', '                                 Dload  Upload   Total   Spent    Left  Speed', '', '  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0', '100 33684    0 33684    0     0  1315k      0 --:--:-- --:--:-- --:--:-- 1315k', 'Created symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.'], 'ansible_job_id': '723225820264.3643', 'results_file': '/root/.ansible_async/723225820264.3643', 'changed': True, 'rc': 0, 'cmd': "# Download and install system-agent for ingress nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --label 'app=ingress'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker  --taints 'app=ingress:NoSchedule'\n", 'start': '2025-09-09 07:10:35.532050', 'end': '2025-09-09 07:10:37.488438', 'delta': '0:00:01.956388', 'msg': '', 'invocation': {'module_args': {'executable': '/bin/bash', '_raw_params': "# Download and install system-agent for ingress nodes\ncurl --insecure -fL https://rancher.asl.brindisi.it/system-agent-install.sh | sh -s -  --server https://rancher.asl.brindisi.it  --label 'cattle.io/os=linux'  --label 'app=ingress'  --token pndmlpgdbkppr6msbw8wgnwk5svzrgnc9l4kq4k9sbqxbfg4zcwhnx  --worker  --taints 'app=ingress:NoSchedule'\n", '_uses_shell': True, 'warn': False, 'stdin_add_newline': True, 'strip_empty_ends': True, 'argv': None, 'chdir': None, 'creates': None, 'removes': None, 'stdin': None}}, 'failed': False, 'attempts': 1, 'item': {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '723225820264.3643', 'results_file': '/root/.ansible_async/723225820264.3643', 'changed': True, 'item': 'rke2-ingress02', 'ansible_loop_var': 'item'}, 'ansible_loop_var': 'item'}) => {
    "msg": "Ingress Node: {'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '723225820264.3643', 'results_file': '/root/.ansible_async/723225820264.3643', 'changed': True, 'item': 'rke2-ingress02', 'ansible_loop_var': 'item'}\nStatus: Success\nOutput: [INFO]  Label: cattle.io/os=linux\n[INFO]  Label: app=ingress\n[INFO]  Role requested: worker\n[INFO]  Taint: app=ingress:NoSchedule\n[INFO]  CA strict verification is set to true\n[INFO]  Using default agent configuration directory /etc/rancher/agent\n[INFO]  Using default agent var directory /var/lib/rancher/agent\n[INFO]  Successfully downloaded CA certificate\n[INFO]  Value from https://rancher.asl.brindisi.it/cacerts is an x509 certificate\n[INFO]  Successfully tested Rancher connection\n[INFO]  Downloading rancher-system-agent binary from https://rancher.asl.brindisi.it/assets/rancher-system-agent-amd64\n[INFO]  Successfully downloaded the rancher-system-agent binary.\n[INFO]  Downloading rancher-system-agent-uninstall.sh script from https://rancher.asl.brindisi.it/assets/system-agent-uninstall.sh\n[INFO]  Successfully downloaded the rancher-system-agent-uninstall.sh script.\n[INFO]  Generating Cattle ID\n[INFO]  Successfully downloaded Rancher connection information\n[INFO]  systemd: Creating service file\n[INFO]  Creating environment file /etc/systemd/system/rancher-system-agent.env\n[INFO]  Enabling rancher-system-agent.service\n[INFO]  Starting/restarting rancher-system-agent.service\nError:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100 33684    0 33684    0     0  1315k      0 --:--:-- --:--:-- --:--:-- 1315k\nCreated symlink /etc/systemd/system/multi-user.target.wants/rancher-system-agent.service → /etc/systemd/system/rancher-system-agent.service.\n"
}
2025-09-09 07:04:18,940 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Verify nodes are registered in Rancher] *********************************************************************************************************************************
2025-09-09 07:04:19,352 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it -> localhost]
2025-09-09 07:04:19,364 p=1700635 u=root n=ansible | TASK [master1_create_cluster : Show registered nodes] **************************************************************************************************************************************************
2025-09-09 07:04:19,415 p=1700635 u=root n=ansible | ok: [cornelio.app.iac-svil.almaviva.it] => {
    "msg": "Nodes registered in cluster:\n"
}
2025-09-09 07:04:19,453 p=1700635 u=root n=ansible | PLAY [Pausa dopo creazione cluster] ********************************************************************************************************************************************************************
2025-09-09 07:04:19,466 p=1700635 u=root n=ansible | TASK [Attendi 180 secondi prima setup kubectl] *********************************************************************************************************************************************************
2025-09-09 07:04:19,482 p=1702958 u=root n=ansible | Pausing for 180 seconds
2025-09-09 07:04:19,482 p=1702958 u=root n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-09-09 07:04:19,482 p=1702958 u=root n=ansible | [Attendi 180 secondi prima setup kubectl]
Attendendo 60 secondi dopo creazione cluster...:
2025-09-09 07:07:19,485 p=1700635 u=root n=ansible | ok: [localhost]
2025-09-09 07:07:19,505 p=1700635 u=root n=ansible | PLAY [new_managers] ************************************************************************************************************************************************************************************
2025-09-09 07:07:19,528 p=1700635 u=root n=ansible | TASK [kubectl_setup : Copy kubectl binary to system path] **********************************************************************************************************************************************
2025-09-09 07:07:20,795 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:07:20,807 p=1700635 u=root n=ansible | TASK [kubectl_setup : Create .kube directory for root] *************************************************************************************************************************************************
2025-09-09 07:07:21,096 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/root/.kube",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 07:07:21,097 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:07:21,107 p=1700635 u=root n=ansible | TASK [kubectl_setup : Copy RKE2 kubeconfig to root .kube directory] ************************************************************************************************************************************
2025-09-09 07:07:21,395 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:07:21,406 p=1700635 u=root n=ansible | TASK [kubectl_setup : Verify kubectl is working] *******************************************************************************************************************************************************
2025-09-09 07:07:21,786 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:07:21,797 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show kubectl test result] ********************************************************************************************************************************************************
2025-09-09 07:07:21,825 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Kubectl test result:\nNAME            STATUS   ROLES                       AGE     VERSION\nrke2-manager2   Ready    control-plane,etcd,master   2m34s   v1.31.11+rke2r1\n"
}
2025-09-09 07:07:21,837 p=1700635 u=root n=ansible | TASK [kubectl_setup : Wait 60 seconds before applying DNS fix] *****************************************************************************************************************************************
2025-09-09 07:07:21,862 p=1703081 u=root n=ansible | Pausing for 60 seconds
2025-09-09 07:07:21,862 p=1703081 u=root n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-09-09 07:08:21,866 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 07:08:21,877 p=1700635 u=root n=ansible | TASK [kubectl_setup : Wait for cattle-system namespace to exist] ***************************************************************************************************************************************
2025-09-09 07:08:22,918 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:08:22,930 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show namespace status] ***********************************************************************************************************************************************************
2025-09-09 07:08:22,960 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Cattle-system namespace: Found\n"
}
2025-09-09 07:08:22,972 p=1700635 u=root n=ansible | TASK [kubectl_setup : Wait for cattle-cluster-agent deployment to exist] *******************************************************************************************************************************
2025-09-09 07:08:23,366 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:08:23,378 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show deployment availability] ****************************************************************************************************************************************************
2025-09-09 07:08:23,408 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Cattle-cluster-agent deployment: Found\n"
}
2025-09-09 07:08:23,420 p=1700635 u=root n=ansible | TASK [kubectl_setup : Check current cattle-cluster-agent deployment] ***********************************************************************************************************************************
2025-09-09 07:08:23,802 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:08:23,817 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show current deployment (before changes)] ****************************************************************************************************************************************
2025-09-09 07:08:23,856 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "current_deployment.stdout": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    deployment.kubernetes.io/revision: \"1\"\n    management.cattle.io/scale-available: \"2\"\n    objectset.rio.cattle.io/applied: H4sIAAAAAAAA/8RWYW/iOBD9Kyd/TmgIhLaR9kPUZveitmxFYKXVqkKDPQFfjZ2zHbqo4r+fnIQ2tLS91d3pPkGSmTdvxm9e8kig5N9QG64kiQmUpTnZ9IlH7rlkJCaXWAq1XaO0xCNrtMDAAokfCUipLFiupHGXa5CwRBfXo2CtwB5XJ4aCQB82wAUsBJKYhMQjavEHUmvQ9jRXnWju6r3zXD1I1P5yc09icj8wnSebvvfbFZfsU8KYkh9CSFg7LlRUxqL2Ydl093GSKYG6zPtqgb7ZGotrsvOIgAWKegpvQazArFzFiA4AgwhgRItTHPZZuAjCEM8B6LCgtBicDthZMXSge5I1hv+Sa5dNG/LMx5RIHRuDAqlVujkfS1fXT0ShLN8C3zkEq8HicutCtRKCy+WsZGCxgfqZV3qJJO577mImOycc7Dxit6XjNTlIdPdxXYo9SEdK4m/TahuDouCS25qeVAyTznWpsUCtkV1WmstlTlfIKscjW0r1dDv9ibSyteZ/7HNQUnwaVfqz1GhMI+8fj+QetySui/laCew5CWiJFo07X6qk1UqUAiQ6JZWooR48yZwcNyAqdDjE6grJ3e5u55EH5MuVJXE/CHbev8fB/19JrMEd2X9d/XmxXu3wL5Xd3XlE458V/wW5NIrL29Waol43zN6hu0ALL+akzCHZsbIv+D5wydSDqSnfOfGXiiXS8n+sdcX2EI780/7lL83ieC9uQ98b89HdbcZuVamEWm6vaqDDeayUsbXjvVBF3blTNnCJuiGCclP/tg55kUyn1+n8c5pMZ5M037MhMcH1AhlD9sym5J8KEAa9QiDa9n/z6mKtgfpVudTA0KeKOFEeVsny+eQq7dSoIY4E5unkWzrpBK6sLU18cqJB0hXqHhjRW2guGTe8x+0RiItkfvF7enGVz246OCH2F+E54gjpGSvOz/rFoFj0hxjQwQDO+9EiGmE4ikYFHUUMB8DwDOh5FAVBOICIhscKXc/y6QHZelleB16d5fObZJx8SS8/Dm5R55P0S5ZPJ987GceiJ+llOp5myfV8nNx0J7xXlEaG0nIQxi8GcBZRDMLBm5Off0snefZ13AHahL1+v3dsANk4nybX1/PZLOs2FgZBFC7g1KfF+dAfsjD0IQr6PpyewhCD4SiIiqNoXyZpns+z2/nl15sk63IwRvCyxw+klU8n2cXUEc4+f3811zuP8DW4ty1ppbOXULNc8b6tNu62EuJWCU7dkmXFWNlbjeb5q6Hz4aNxyVu73ihRrfFGVdK2dub+3oJ1ny0nr4+AvPpAOXimEdhXKbYkdk04B/OIQb3hFBNKHfS4m02cOQhnKU9ug0WB1NbO2PiXC3r/3YOWsnqundzWEj9OPnx7Or7NSEzXao72apBqtM42GRZQCXujGJJ4EAb7Z+O3sg+E7Lxut/srAAD//+MYSs2QCwAA\n    objectset.rio.cattle.io/id: \"\"\n    objectset.rio.cattle.io/owner-gvk: k3s.cattle.io/v1, Kind=Addon\n    objectset.rio.cattle.io/owner-name: cluster-agent\n    objectset.rio.cattle.io/owner-namespace: kube-system\n  creationTimestamp: \"2025-09-09T05:11:11Z\"\n  generation: 1\n  labels:\n    objectset.rio.cattle.io/hash: c5c3ae05aa6cf7e41d2b022e9aac4fccf373d8f4\n  name: cattle-cluster-agent\n  namespace: cattle-system\n  resourceVersion: \"580\"\n  uid: 7fa2cfd1-db83-4833-b072-e095ad589432\nspec:\n  progressDeadlineSeconds: 600\n  replicas: 1\n  revisionHistoryLimit: 10\n  selector:\n    matchLabels:\n      app: cattle-cluster-agent\n  strategy:\n    rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 0\n    type: RollingUpdate\n  template:\n    metadata:\n      creationTimestamp: null\n      labels:\n        app: cattle-cluster-agent\n    spec:\n      affinity:\n        nodeAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n          - preference:\n              matchExpressions:\n              - key: node-role.kubernetes.io/controlplane\n                operator: In\n                values:\n                - \"true\"\n            weight: 100\n          - preference:\n              matchExpressions:\n              - key: node-role.kubernetes.io/control-plane\n                operator: In\n                values:\n                - \"true\"\n            weight: 100\n          - preference:\n              matchExpressions:\n              - key: node-role.kubernetes.io/master\n                operator: In\n                values:\n                - \"true\"\n            weight: 100\n          - preference:\n              matchExpressions:\n              - key: cattle.io/cluster-agent\n                operator: In\n                values:\n                - \"true\"\n            weight: 1\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: beta.kubernetes.io/os\n                operator: NotIn\n                values:\n                - windows\n        podAntiAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n          - podAffinityTerm:\n              labelSelector:\n                matchExpressions:\n                - key: app\n                  operator: In\n                  values:\n                  - cattle-cluster-agent\n              topologyKey: kubernetes.io/hostname\n            weight: 100\n      containers:\n      - env:\n        - name: CATTLE_FEATURES\n          value: embedded-cluster-api=false,fleet=false,managed-system-upgrade-controller=false,multi-cluster-management=false,multi-cluster-management-agent=true,provisioningprebootstrap=false,provisioningv2=false,rke2=false,ui-sql-cache=false\n        - name: CATTLE_IS_RKE\n          value: \"false\"\n        - name: CATTLE_SERVER\n          value: https://rancher.asl.brindisi.it\n        - name: CATTLE_CA_CHECKSUM\n          value: 2e1b29ee6ec8df981f3fb14e0c33a915b56e2656fc65de3ade8ac9550023a5c2\n        - name: CATTLE_CLUSTER\n          value: \"true\"\n        - name: CATTLE_K8S_MANAGED\n          value: \"true\"\n        - name: CATTLE_CLUSTER_REGISTRY\n        - name: CATTLE_CREDENTIAL_NAME\n          value: cattle-credentials-f3a85ce023\n        - name: CATTLE_SERVER_VERSION\n          value: v2.11.2\n        - name: CATTLE_INSTALL_UUID\n          value: 20052ba7-cf94-4d22-a501-a77a4e04605f\n        - name: CATTLE_INGRESS_IP_DOMAIN\n          value: sslip.io\n        - name: STRICT_VERIFY\n          value: \"true\"\n        image: rancher/rancher-agent:v2.11.2\n        imagePullPolicy: IfNotPresent\n        name: cluster-register\n        resources: {}\n        terminationMessagePath: /dev/termination-log\n        terminationMessagePolicy: File\n        volumeMounts:\n        - mountPath: /cattle-credentials\n          name: cattle-credentials\n          readOnly: true\n      dnsPolicy: ClusterFirst\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext: {}\n      serviceAccount: cattle\n      serviceAccountName: cattle\n      terminationGracePeriodSeconds: 30\n      tolerations:\n      - effect: NoExecute\n        key: node-role.kubernetes.io/etcd\n      - effect: NoSchedule\n        key: node-role.kubernetes.io/control-plane\n      volumes:\n      - name: cattle-credentials\n        secret:\n          defaultMode: 320\n          secretName: cattle-credentials-f3a85ce023\nstatus:\n  conditions:\n  - lastTransitionTime: \"2025-09-09T05:11:12Z\"\n    lastUpdateTime: \"2025-09-09T05:11:12Z\"\n    message: Deployment does not have minimum availability.\n    reason: MinimumReplicasUnavailable\n    status: \"False\"\n    type: Available\n  - lastTransitionTime: \"2025-09-09T05:11:12Z\"\n    lastUpdateTime: \"2025-09-09T05:11:13Z\"\n    message: ReplicaSet \"cattle-cluster-agent-6fb4596b8f\" is progressing.\n    reason: ReplicaSetUpdated\n    status: \"True\"\n    type: Progressing\n  observedGeneration: 1\n  replicas: 1\n  unavailableReplicas: 1\n  updatedReplicas: 1"
}
2025-09-09 07:08:23,875 p=1700635 u=root n=ansible | TASK [kubectl_setup : Apply DNS fix to cattle-cluster-agent deployment] ********************************************************************************************************************************
2025-09-09 07:08:24,350 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:08:24,363 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show patch result] ***************************************************************************************************************************************************************
2025-09-09 07:08:24,450 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Patch applied: Yes\nOutput: deployment.apps/cattle-cluster-agent patched\nError: Warning: spec.template.spec.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[0].matchExpressions[0].key: beta.kubernetes.io/os is deprecated since v1.14; use \"kubernetes.io/os\" instead\nWarning: spec.template.spec.affinity.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution[2].preference.matchExpressions[0].key: node-role.kubernetes.io/master is use \"node-role.kubernetes.io/control-plane\" instead\n"
}
2025-09-09 07:08:24,461 p=1700635 u=root n=ansible | TASK [kubectl_setup : Wait for deployment rollout to complete] *****************************************************************************************************************************************
2025-09-09 07:08:26,187 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:08:26,202 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show rollout status] *************************************************************************************************************************************************************
2025-09-09 07:08:26,291 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "rollout_status.stdout": "Waiting for deployment \"cattle-cluster-agent\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"cattle-cluster-agent\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"cattle-cluster-agent\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"cattle-cluster-agent\" successfully rolled out"
}
2025-09-09 07:08:26,304 p=1700635 u=root n=ansible | TASK [kubectl_setup : Verify final deployment configuration] *******************************************************************************************************************************************
2025-09-09 07:08:26,685 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:08:26,696 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show final configuration] ********************************************************************************************************************************************************
2025-09-09 07:08:26,783 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Final hostAliases configuration:\n      hostAliases:\n      - hostnames:\n        - rancher.asl.brindisi.it\n        ip: 10.116.82.131\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext: {}\n      serviceAccount: cattle\n      serviceAccountName: cattle\n      terminationGracePeriodSeconds: 30\n      tolerations:\n"
}
2025-09-09 07:08:26,793 p=1700635 u=root n=ansible | TASK [kubectl_setup : Check cattle-cluster-agent pods status] ******************************************************************************************************************************************
2025-09-09 07:08:27,289 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:08:27,304 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show pods status] ****************************************************************************************************************************************************************
2025-09-09 07:08:27,342 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Cattle cluster agent pods:\nNAME                                    READY   STATUS    RESTARTS   AGE\ncattle-cluster-agent-74f8d6b895-f5lm9   1/1     Running   0          3s\n"
}
2025-09-09 07:08:27,354 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show summary] ********************************************************************************************************************************************************************
2025-09-09 07:08:27,389 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "=== KUBECTL SETUP SUMMARY ===\n✅ Kubectl configured: Yes\n✅ Kubeconfig copied: Yes\n🔍 Cattle-system namespace: Found\n🔍 Cattle-cluster-agent deployment: Found\n🔧 DNS Fix applied: Yes\n\n"
}
2025-09-09 07:08:27,421 p=1700635 u=root n=ansible | PLAY [new_managers] ************************************************************************************************************************************************************************************
2025-09-09 07:08:27,446 p=1700635 u=root n=ansible | TASK [kubectl_setup : Copy kubectl binary to system path] **********************************************************************************************************************************************
2025-09-09 07:08:28,098 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 07:08:28,110 p=1700635 u=root n=ansible | TASK [kubectl_setup : Create .kube directory for root] *************************************************************************************************************************************************
2025-09-09 07:08:28,423 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 07:08:28,438 p=1700635 u=root n=ansible | TASK [kubectl_setup : Copy RKE2 kubeconfig to root .kube directory] ************************************************************************************************************************************
2025-09-09 07:08:28,774 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 07:08:28,790 p=1700635 u=root n=ansible | TASK [kubectl_setup : Verify kubectl is working] *******************************************************************************************************************************************************
2025-09-09 07:08:29,223 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:08:29,237 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show kubectl test result] ********************************************************************************************************************************************************
2025-09-09 07:08:29,264 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Kubectl test result:\nNAME            STATUS   ROLES                       AGE     VERSION\nrke2-manager2   Ready    control-plane,etcd,master   3m42s   v1.31.11+rke2r1\n"
}
2025-09-09 07:08:29,276 p=1700635 u=root n=ansible | TASK [kubectl_setup : Wait 60 seconds before applying DNS fix] *****************************************************************************************************************************************
2025-09-09 07:08:29,300 p=1703231 u=root n=ansible | Pausing for 60 seconds
2025-09-09 07:08:29,301 p=1703231 u=root n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-09-09 07:09:29,303 p=1700635 u=root n=ansible | ok: [rke2-manager2]
2025-09-09 07:09:29,317 p=1700635 u=root n=ansible | TASK [kubectl_setup : Wait for cattle-system namespace to exist] ***************************************************************************************************************************************
2025-09-09 07:09:30,314 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:09:30,327 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show namespace status] ***********************************************************************************************************************************************************
2025-09-09 07:09:30,358 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Cattle-system namespace: Found\n"
}
2025-09-09 07:09:30,370 p=1700635 u=root n=ansible | TASK [kubectl_setup : Wait for cattle-cluster-agent deployment to exist] *******************************************************************************************************************************
2025-09-09 07:09:30,943 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:09:30,956 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show deployment availability] ****************************************************************************************************************************************************
2025-09-09 07:09:30,991 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Cattle-cluster-agent deployment: Found\n"
}
2025-09-09 07:09:31,011 p=1700635 u=root n=ansible | TASK [kubectl_setup : Check current cattle-cluster-agent deployment] ***********************************************************************************************************************************
2025-09-09 07:09:31,562 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:09:31,577 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show current deployment (before changes)] ****************************************************************************************************************************************
2025-09-09 07:09:31,620 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "current_deployment.stdout": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    deployment.kubernetes.io/revision: \"4\"\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{\"management.cattle.io/scale-available\":\"2\"},\"name\":\"cattle-cluster-agent\",\"namespace\":\"cattle-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"cattle-cluster-agent\"}},\"strategy\":{\"rollingUpdate\":{\"maxSurge\":1,\"maxUnavailable\":0},\"type\":\"RollingUpdate\"},\"template\":{\"metadata\":{\"labels\":{\"app\":\"cattle-cluster-agent\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"preferredDuringSchedulingIgnoredDuringExecution\":[{\"preference\":{\"matchExpressions\":[{\"key\":\"node-role.kubernetes.io/controlplane\",\"operator\":\"In\",\"values\":[\"true\"]}]},\"weight\":100},{\"preference\":{\"matchExpressions\":[{\"key\":\"node-role.kubernetes.io/control-plane\",\"operator\":\"In\",\"values\":[\"true\"]}]},\"weight\":100},{\"preference\":{\"matchExpressions\":[{\"key\":\"node-role.kubernetes.io/master\",\"operator\":\"In\",\"values\":[\"true\"]}]},\"weight\":100},{\"preference\":{\"matchExpressions\":[{\"key\":\"cattle.io/cluster-agent\",\"operator\":\"In\",\"values\":[\"true\"]}]},\"weight\":1}],\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"beta.kubernetes.io/os\",\"operator\":\"NotIn\",\"values\":[\"windows\"]}]}]}},\"podAntiAffinity\":{\"preferredDuringSchedulingIgnoredDuringExecution\":[{\"podAffinityTerm\":{\"labelSelector\":{\"matchExpressions\":[{\"key\":\"app\",\"operator\":\"In\",\"values\":[\"cattle-cluster-agent\"]}]},\"topologyKey\":\"kubernetes.io/hostname\"},\"weight\":100}]}},\"containers\":[{\"env\":[{\"name\":\"CATTLE_FEATURES\",\"value\":\"embedded-cluster-api=false,fleet=false,managed-system-upgrade-controller=false,multi-cluster-management=false,multi-cluster-management-agent=true,provisioningprebootstrap=false,provisioningv2=false,rke2=false,ui-sql-cache=false\"},{\"name\":\"CATTLE_IS_RKE\",\"value\":\"false\"},{\"name\":\"CATTLE_SERVER\",\"value\":\"https://rancher.asl.brindisi.it\"},{\"name\":\"CATTLE_CA_CHECKSUM\",\"value\":\"2e1b29ee6ec8df981f3fb14e0c33a915b56e2656fc65de3ade8ac9550023a5c2\"},{\"name\":\"CATTLE_CLUSTER\",\"value\":\"true\"},{\"name\":\"CATTLE_K8S_MANAGED\",\"value\":\"true\"},{\"name\":\"CATTLE_CLUSTER_REGISTRY\",\"value\":\"\"},{\"name\":\"CATTLE_CREDENTIAL_NAME\",\"value\":\"cattle-credentials-dc7ac97710\"},{\"name\":\"CATTLE_SERVER_VERSION\",\"value\":\"v2.11.2\"},{\"name\":\"CATTLE_INSTALL_UUID\",\"value\":\"20052ba7-cf94-4d22-a501-a77a4e04605f\"},{\"name\":\"CATTLE_INGRESS_IP_DOMAIN\",\"value\":\"sslip.io\"},{\"name\":\"STRICT_VERIFY\",\"value\":\"true\"}],\"image\":\"rancher/rancher-agent:v2.11.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"cluster-register\",\"volumeMounts\":[{\"mountPath\":\"/cattle-credentials\",\"name\":\"cattle-credentials\",\"readOnly\":true}]}],\"serviceAccountName\":\"cattle\",\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node-role.kubernetes.io/etcd\"},{\"effect\":\"NoSchedule\",\"key\":\"node-role.kubernetes.io/control-plane\"}],\"volumes\":[{\"name\":\"cattle-credentials\",\"secret\":{\"defaultMode\":320,\"secretName\":\"cattle-credentials-dc7ac97710\"}}]}}}}\n    management.cattle.io/scale-available: \"2\"\n    objectset.rio.cattle.io/applied: H4sIAAAAAAAA/8RWYW/iOBD9Kyd/TmgIhLaR9kPUZveitmxFYKXVqkKDPQFfjZ2zHbqo4r+fnIQ2tLS91d3pPkGSmTdvxm9e8kig5N9QG64kiQmUpTnZ9IlH7rlkJCaXWAq1XaO0xCNrtMDAAokfCUipLFiupHGXa5CwRBfXo2CtwB5XJ4aCQB82wAUsBJKYhMQjavEHUmvQ9jRXnWju6r3zXD1I1P5yc09icj8wnSebvvfbFZfsU8KYkh9CSFg7LlRUxqL2Ydl093GSKYG6zPtqgb7ZGotrsvOIgAWKegpvQazArFzFiA4AgwhgRItTHPZZuAjCEM8B6LCgtBicDthZMXSge5I1hv+Sa5dNG/LMx5RIHRuDAqlVujkfS1fXT0ShLN8C3zkEq8HicutCtRKCy+WsZGCxgfqZV3qJJO577mImOycc7Dxit6XjNTlIdPdxXYo9SEdK4m/TahuDouCS25qeVAyTznWpsUCtkV1WmstlTlfIKscjW0r1dDv9ibSyteZ/7HNQUnwaVfqz1GhMI+8fj+QetySui/laCew5CWiJFo07X6qk1UqUAiQ6JZWooR48yZwcNyAqdDjE6grJ3e5u55EH5MuVJXE/CHbev8fB/19JrMEd2X9d/XmxXu3wL5Xd3XlE458V/wW5NIrL29Waol43zN6hu0ALL+akzCHZsbIv+D5wydSDqSnfOfGXiiXS8n+sdcX2EI780/7lL83ieC9uQ98b89HdbcZuVamEWm6vaqDDeayUsbXjvVBF3blTNnCJuiGCclP/tg55kUyn1+n8c5pMZ5M037MhMcH1AhlD9sym5J8KEAa9QiDa9n/z6mKtgfpVudTA0KeKOFEeVsny+eQq7dSoIY4E5unkWzrpBK6sLU18cqJB0hXqHhjRW2guGTe8x+0RiItkfvF7enGVz246OCH2F+E54gjpGSvOz/rFoFj0hxjQwQDO+9EiGmE4ikYFHUUMB8DwDOh5FAVBOICIhscKXc/y6QHZelleB16d5fObZJx8SS8/Dm5R55P0S5ZPJ987GceiJ+llOp5myfV8nNx0J7xXlEaG0nIQxi8GcBZRDMLBm5Off0snefZ13AHahL1+v3dsANk4nybX1/PZLOs2FgZBFC7g1KfF+dAfsjD0IQr6PpyewhCD4SiIiqNoXyZpns+z2/nl15sk63IwRvCyxw+klU8n2cXUEc4+f3811zuP8DW4ty1ppbOXULNc8b6tNu62EuJWCU7dkmXFWNlbjeb5q6Hz4aNxyVu73ihRrfFGVdK2dub+3oJ1ny0nr4+AvPpAOXimEdhXKbYkdk04B/OIQb3hFBNKHfS4m02cOQhnKU9ug0WB1NbO2PiXC3r/3YOWsnqundzWEj9OPnx7Or7NSEzXao72apBqtM42GRZQCXujGJJ4EAb7Z+O3sg+E7Lxut/srAAD//+MYSs2QCwAA\n    objectset.rio.cattle.io/id: \"\"\n    objectset.rio.cattle.io/owner-gvk: k3s.cattle.io/v1, Kind=Addon\n    objectset.rio.cattle.io/owner-name: cluster-agent\n    objectset.rio.cattle.io/owner-namespace: kube-system\n  creationTimestamp: \"2025-09-09T05:11:11Z\"\n  generation: 5\n  labels:\n    objectset.rio.cattle.io/hash: c5c3ae05aa6cf7e41d2b022e9aac4fccf373d8f4\n  name: cattle-cluster-agent\n  namespace: cattle-system\n  resourceVersion: \"2381\"\n  uid: 7fa2cfd1-db83-4833-b072-e095ad589432\nspec:\n  progressDeadlineSeconds: 600\n  replicas: 2\n  revisionHistoryLimit: 10\n  selector:\n    matchLabels:\n      app: cattle-cluster-agent\n  strategy:\n    rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 0\n    type: RollingUpdate\n  template:\n    metadata:\n      creationTimestamp: null\n      labels:\n        app: cattle-cluster-agent\n    spec:\n      affinity:\n        nodeAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n          - preference:\n              matchExpressions:\n              - key: node-role.kubernetes.io/controlplane\n                operator: In\n                values:\n                - \"true\"\n            weight: 100\n          - preference:\n              matchExpressions:\n              - key: node-role.kubernetes.io/control-plane\n                operator: In\n                values:\n                - \"true\"\n            weight: 100\n          - preference:\n              matchExpressions:\n              - key: node-role.kubernetes.io/master\n                operator: In\n                values:\n                - \"true\"\n            weight: 100\n          - preference:\n              matchExpressions:\n              - key: cattle.io/cluster-agent\n                operator: In\n                values:\n                - \"true\"\n            weight: 1\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: beta.kubernetes.io/os\n                operator: NotIn\n                values:\n                - windows\n        podAntiAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n          - podAffinityTerm:\n              labelSelector:\n                matchExpressions:\n                - key: app\n                  operator: In\n                  values:\n                  - cattle-cluster-agent\n              topologyKey: kubernetes.io/hostname\n            weight: 100\n      containers:\n      - env:\n        - name: CATTLE_FEATURES\n          value: embedded-cluster-api=false,fleet=false,managed-system-upgrade-controller=false,multi-cluster-management=false,multi-cluster-management-agent=true,provisioningprebootstrap=false,provisioningv2=false,rke2=false,ui-sql-cache=false\n        - name: CATTLE_IS_RKE\n          value: \"false\"\n        - name: CATTLE_SERVER\n          value: https://rancher.asl.brindisi.it\n        - name: CATTLE_CA_CHECKSUM\n          value: 2e1b29ee6ec8df981f3fb14e0c33a915b56e2656fc65de3ade8ac9550023a5c2\n        - name: CATTLE_CLUSTER\n          value: \"true\"\n        - name: CATTLE_K8S_MANAGED\n          value: \"true\"\n        - name: CATTLE_CLUSTER_REGISTRY\n        - name: CATTLE_CREDENTIAL_NAME\n          value: cattle-credentials-dc7ac97710\n        - name: CATTLE_SERVER_VERSION\n          value: v2.11.2\n        - name: CATTLE_INSTALL_UUID\n          value: 20052ba7-cf94-4d22-a501-a77a4e04605f\n        - name: CATTLE_INGRESS_IP_DOMAIN\n          value: sslip.io\n        - name: STRICT_VERIFY\n          value: \"true\"\n        image: rancher/rancher-agent:v2.11.2\n        imagePullPolicy: IfNotPresent\n        name: cluster-register\n        resources: {}\n        terminationMessagePath: /dev/termination-log\n        terminationMessagePolicy: File\n        volumeMounts:\n        - mountPath: /cattle-credentials\n          name: cattle-credentials\n          readOnly: true\n      dnsPolicy: ClusterFirst\n      hostAliases:\n      - hostnames:\n        - rancher.asl.brindisi.it\n        ip: 10.116.82.131\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext: {}\n      serviceAccount: cattle\n      serviceAccountName: cattle\n      terminationGracePeriodSeconds: 30\n      tolerations:\n      - effect: NoExecute\n        key: node-role.kubernetes.io/etcd\n      - effect: NoSchedule\n        key: node-role.kubernetes.io/control-plane\n      volumes:\n      - name: cattle-credentials\n        secret:\n          defaultMode: 320\n          secretName: cattle-credentials-dc7ac97710\nstatus:\n  availableReplicas: 2\n  conditions:\n  - lastTransitionTime: \"2025-09-09T05:11:12Z\"\n    lastUpdateTime: \"2025-09-09T05:14:51Z\"\n    message: ReplicaSet \"cattle-cluster-agent-74545db467\" has successfully progressed.\n    reason: NewReplicaSetAvailable\n    status: \"True\"\n    type: Progressing\n  - lastTransitionTime: \"2025-09-09T05:15:44Z\"\n    lastUpdateTime: \"2025-09-09T05:15:44Z\"\n    message: Deployment has minimum availability.\n    reason: MinimumReplicasAvailable\n    status: \"True\"\n    type: Available\n  observedGeneration: 5\n  readyReplicas: 2\n  replicas: 2\n  updatedReplicas: 2"
}
2025-09-09 07:09:31,632 p=1700635 u=root n=ansible | TASK [kubectl_setup : Apply DNS fix to cattle-cluster-agent deployment] ********************************************************************************************************************************
2025-09-09 07:09:32,171 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:09:32,186 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show patch result] ***************************************************************************************************************************************************************
2025-09-09 07:09:32,225 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Patch applied: Yes\nOutput: deployment.apps/cattle-cluster-agent patched (no change)\nError: \n"
}
2025-09-09 07:09:32,237 p=1700635 u=root n=ansible | TASK [kubectl_setup : Wait for deployment rollout to complete] *****************************************************************************************************************************************
2025-09-09 07:09:32,758 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:09:32,776 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show rollout status] *************************************************************************************************************************************************************
2025-09-09 07:09:32,821 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "rollout_status.stdout": "deployment \"cattle-cluster-agent\" successfully rolled out"
}
2025-09-09 07:09:32,836 p=1700635 u=root n=ansible | TASK [kubectl_setup : Verify final deployment configuration] *******************************************************************************************************************************************
2025-09-09 07:09:33,237 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:09:33,252 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show final configuration] ********************************************************************************************************************************************************
2025-09-09 07:09:33,291 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Final hostAliases configuration:\n      hostAliases:\n      - hostnames:\n        - rancher.asl.brindisi.it\n        ip: 10.116.82.131\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext: {}\n      serviceAccount: cattle\n      serviceAccountName: cattle\n      terminationGracePeriodSeconds: 30\n      tolerations:\n"
}
2025-09-09 07:09:33,304 p=1700635 u=root n=ansible | TASK [kubectl_setup : Check cattle-cluster-agent pods status] ******************************************************************************************************************************************
2025-09-09 07:09:33,740 p=1700635 u=root n=ansible | changed: [rke2-manager2]
2025-09-09 07:09:33,754 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show pods status] ****************************************************************************************************************************************************************
2025-09-09 07:09:33,859 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "Cattle cluster agent pods:\nNAME                                    READY   STATUS    RESTARTS   AGE\ncattle-cluster-agent-74545db467-9jp9n   1/1     Running   0          63s\ncattle-cluster-agent-74545db467-l2scw   1/1     Running   0          10s\n"
}
2025-09-09 07:09:33,874 p=1700635 u=root n=ansible | TASK [kubectl_setup : Show summary] ********************************************************************************************************************************************************************
2025-09-09 07:09:33,978 p=1700635 u=root n=ansible | ok: [rke2-manager2] => {
    "msg": "=== KUBECTL SETUP SUMMARY ===\n✅ Kubectl configured: Yes\n✅ Kubeconfig copied: Yes\n🔍 Cattle-system namespace: Found\n🔍 Cattle-cluster-agent deployment: Found\n🔧 DNS Fix applied: Yes\n\n"
}
2025-09-09 07:09:34,027 p=1700635 u=root n=ansible | PLAY [Install and configure Nginx] *********************************************************************************************************************************************************************
2025-09-09 07:09:34,043 p=1700635 u=root n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************************************************************
2025-09-09 07:09:36,115 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 07:09:36,151 p=1700635 u=root n=ansible | TASK [nginx_install : Update apt cache] ****************************************************************************************************************************************************************
2025-09-09 07:09:37,410 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 07:09:37,431 p=1700635 u=root n=ansible | TASK [nginx_install : Install Nginx] *******************************************************************************************************************************************************************
2025-09-09 07:09:49,820 p=1700635 u=root n=ansible | The following additional packages will be installed:
  libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter
  libnginx-mod-mail libnginx-mod-stream nginx-common nginx-core
Suggested packages:
  fcgiwrap nginx-doc
The following NEW packages will be installed:
  libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter
  libnginx-mod-mail libnginx-mod-stream nginx nginx-common nginx-core
0 upgraded, 7 newly installed, 0 to remove and 0 not upgraded.
2025-09-09 07:09:49,820 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:49,833 p=1700635 u=root n=ansible | TASK [nginx_install : Ensure Nginx service is stopped before configuration] ****************************************************************************************************************************
2025-09-09 07:09:50,457 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:50,472 p=1700635 u=root n=ansible | TASK [nginx_install : Create Nginx certificate directory] **********************************************************************************************************************************************
2025-09-09 07:09:50,947 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/etc/nginx/cert",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 07:09:50,948 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:50,964 p=1700635 u=root n=ansible | TASK [nginx_install : Copy SSL certificate to remote server] *******************************************************************************************************************************************
2025-09-09 07:09:52,007 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/IAC/ansible-collaudo-brindisi/files/fullchain.pem[0m
[0;32m[0m[0;36m@@ -0,0 +1,120 @@[0m
[0;36m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIH4jCCBcqgAwIBAgIQDizIrqRztKlPiYudUD0SNjANBgkqhkiG9w0BAQsFADCB[0m
[0;32m[0m[0;32m+iTELMAkGA1UEBhMCSVQxEDAOBgNVBAgMB0JlcmdhbW8xGTAXBgNVBAcMEFBvbnRl[0m
[0;32m[0m[0;32m+IFNhbiBQaWV0cm8xFzAVBgNVBAoMDkFjdGFsaXMgUy5wLkEuMTQwMgYDVQQDDCtB[0m
[0;32m[0m[0;32m+Y3RhbGlzIE9yZ2FuaXphdGlvbiBWYWxpZGF0ZWQgU2VydmVyIENBIEczMB4XDTI1[0m
[0;32m[0m[0;32m+MDMyMTExMTQwMloXDTI2MDMyMTExMTQwMlowfjELMAkGA1UEBhMCSVQxETAPBgNV[0m
[0;32m[0m[0;32m+BAgMCEJyaW5kaXNpMREwDwYDVQQHDAhCcmluZGlzaTEtMCsGA1UECgwkQXppZW5k[0m
[0;32m[0m[0;32m+YSBTYW5pdGFyaWEgTG9jYWxlIERpIEJyaW5kaXNpMRowGAYDVQQDDBEqLmFzbC5i[0m
[0;32m[0m[0;32m+cmluZGlzaS5pdDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKvJQ7JO[0m
[0;32m[0m[0;32m+CCOd1boosk/kDjosVNYi2BkRwBTs/QNSd36I+cra+TW09TmkVkx/RHLrzdnegBYj[0m
[0;32m[0m[0;32m+sa9TgFoZeaFfx3SlSkRLpHNTGuOEKIT/DNETnIbzWHG4qpvxIn9BY2ysWhUHcvbH[0m
[0;32m[0m[0;32m+Kc8kTwjz0Ny5IjyhH7eL0RuX98Lm2sNmaUpJdStrKGi+9LuZxRU+R17uvvPOY0wx[0m
[0;32m[0m[0;32m+ouBvuqLihHt/a9oi81X8Fog2O9yE7PomIpL9UIf0s6weA5J6aXCGJA124UM3onSk[0m
[0;32m[0m[0;32m+RzIbjkkyn/3izG8gyJOLXJW+doAOqvAFW+kmA01be0fKmislP/CNZxRvVt7mMkCF[0m
[0;32m[0m[0;32m+R+MXsYJuc93j/scCAwEAAaOCA04wggNKMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgw[0m
[0;32m[0m[0;32m+FoAUn4qxtfGx3oL0J3y+iM3eqUOBo0swfgYIKwYBBQUHAQEEcjBwMDsGCCsGAQUF[0m
[0;32m[0m[0;32m+BzAChi9odHRwOi8vY2FjZXJ0LmFjdGFsaXMuaXQvY2VydHMvYWN0YWxpcy1hdXRo[0m
[0;32m[0m[0;32m+b3ZnMzAxBggrBgEFBQcwAYYlaHR0cDovL29jc3AwOS5hY3RhbGlzLml0L1ZBL0FV[0m
[0;32m[0m[0;32m+VEhPVi1HMzAtBgNVHREEJjAkgg9hc2wuYnJpbmRpc2kuaXSCESouYXNsLmJyaW5k[0m
[0;32m[0m[0;32m+aXNpLml0MFEGA1UdIARKMEgwPAYGK4EfARMBMDIwMAYIKwYBBQUHAgEWJGh0dHBz[0m
[0;32m[0m[0;32m+Oi8vd3d3LmFjdGFsaXMuaXQvYXJlYS1kb3dubG9hZDAIBgZngQwBAgIwHQYDVR0l[0m
[0;32m[0m[0;32m+BBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMEgGA1UdHwRBMD8wPaA7oDmGN2h0dHA6[0m
[0;32m[0m[0;32m+Ly9jcmwwOS5hY3RhbGlzLml0L1JlcG9zaXRvcnkvQVVUSE9WLUczL2dldExhc3RD[0m
[0;32m[0m[0;32m+UkwwHQYDVR0OBBYEFOVgTGCuhAe5wK/QrqOsAVe+ddmBMA4GA1UdDwEB/wQEAwIF[0m
[0;32m[0m[0;32m+oDCCAX0GCisGAQQB1nkCBAIEggFtBIIBaQFnAHYAlpdkv1VYl633Q4doNwhCd+nw[0m
[0;32m[0m[0;32m+OtX2pPM2bkakPw/KqcYAAAGVuHIlogAABAMARzBFAiEAzhmyunIECHzBklqgCO+F[0m
[0;32m[0m[0;32m+QF7b3abXFxEOAT1FrpTZhFUCIGJTQrG2TiRdQqgmDBsGcTwM8BBZg4uTywHitfIF[0m
[0;32m[0m[0;32m+G3NfAHYADleUvPOuqT4zGyyZB7P3kN+bwj1xMiXdIaklrGHFTiEAAAGVuHIlzQAA[0m
[0;32m[0m[0;32m+BAMARzBFAiBmU0QVJw8wAQRGlJmSXuOS5Bg0iU4hnBOBVrk1nrc1DwIhALYTW+Hs[0m
[0;32m[0m[0;32m+aoXpuyF6kYnoyvIXhzBabfBS6pWdUr5xtlgrAHUAJS+Uwisp6W6fQRpyBytpXFtS[0m
[0;32m[0m[0;32m+/5epDSVAu/zcUexN7gsAAAGVuHImPQAABAMARjBEAiB3u9fwDCDyLtwNjcmaqWx9[0m
[0;32m[0m[0;32m+tpiZKfR+dKiPsEa8FRc66gIgbf2myelRNqF+fkOQuI9qza3ttmXMzpznl5zCJYbb[0m
[0;32m[0m[0;32m+xSAwDQYJKoZIhvcNAQELBQADggIBAGS3fcTjtLbKGrm32OvjEUHpZNqzpawed6eg[0m
[0;32m[0m[0;32m+DKxN56tEZM6Vo9PaySUXP5lf9J9qdXV1gLb7q8pABG/7d/keSjhtdVX7rIciRwYK[0m
[0;32m[0m[0;32m+VIUzvfRg8MQe6vucEkNJb0CpR8X4jUW46JhuYiIRVM0DPtdwBmaglpMoWmRB8RY4[0m
[0;32m[0m[0;32m+CELgLh0cKKjRSMRHKcA3i570dI9+BccXcbmTZ60NqdKldhi9SZYylgfK1R2t6gD+[0m
[0;32m[0m[0;32m+yuA055iTfCibjiSqotE0e8K0Pl5c689Z824FZkVYxXNVxCgkY3KWppsXHsJLx9JQ[0m
[0;32m[0m[0;32m+vEQUIY7KwXuepZ+Tra3MgylGsyf2hW48s+JxUJuUauET6s1qUxjxGsKA4FK1Rcdt[0m
[0;32m[0m[0;32m+sMMFErblJ3pt1jOcEoVeG5OFg163k1EWZkAkjQ9sM3UtkatgxMnSiqoLDUIPEUXI[0m
[0;32m[0m[0;32m+Qm04onhNpOpeDD9ewvx1M3vjlBuYjeFreKMF1lmk0ExCHtVMraFYMhE8PXT/TkAs[0m
[0;32m[0m[0;32m+K/Yqj65tLIORdX2API0O8tUsuPa5AR4XVn6CpLXKHIP4j/O2htlkABfC3UlVKuDm[0m
[0;32m[0m[0;32m+hCsKRmn8SZAqb3oqcerBaHxu0y1mIxYpGgpE4hByFiLmfp9eGaZymmNA7NOYfuoO[0m
[0;32m[0m[0;32m+v0iz5tQtBobLAJkLm8zPGRYANeOtEqpIkVQwwZ3IJ2WuMfeyoYPGyLsvtj5At2Tv[0m
[0;32m[0m[0;32m+s6yL6i81[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIHdTCCBV2gAwIBAgIQXDs/N638KP4Pz9Or+D+FUTANBgkqhkiG9w0BAQsFADBr[0m
[0;32m[0m[0;32m+MQswCQYDVQQGEwJJVDEOMAwGA1UEBwwFTWlsYW4xIzAhBgNVBAoMGkFjdGFsaXMg[0m
[0;32m[0m[0;32m+Uy5wLkEuLzAzMzU4NTIwOTY3MScwJQYDVQQDDB5BY3RhbGlzIEF1dGhlbnRpY2F0[0m
[0;32m[0m[0;32m+aW9uIFJvb3QgQ0EwHhcNMjAwNzA2MDcyMDU1WhcNMzAwOTIyMTEyMjAyWjCBiTEL[0m
[0;32m[0m[0;32m+MAkGA1UEBhMCSVQxEDAOBgNVBAgMB0JlcmdhbW8xGTAXBgNVBAcMEFBvbnRlIFNh[0m
[0;32m[0m[0;32m+biBQaWV0cm8xFzAVBgNVBAoMDkFjdGFsaXMgUy5wLkEuMTQwMgYDVQQDDCtBY3Rh[0m
[0;32m[0m[0;32m+bGlzIE9yZ2FuaXphdGlvbiBWYWxpZGF0ZWQgU2VydmVyIENBIEczMIICIjANBgkq[0m
[0;32m[0m[0;32m+hkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAs73Ch+t2owm3ayTkyqy0OPuCTiybxTyS[0m
[0;32m[0m[0;32m+4cU4y0t2RGSwCNjLh/rcutO0yoriZxVtPrNMcIRQ544BQhHFt/ypW7e+t8wWKrHa[0m
[0;32m[0m[0;32m+r3BkKwSUbqNwpDWP1bXs7IJTVhHXWGAm7Ak1FhrrBmtXk8QtdzTzDDuxfFBK7sCL[0m
[0;32m[0m[0;32m+N0Jdqoqb1V1z3wsWqAvr4KlSCFW05Nh4baWm/kXOmb8U+XR6kUmuoVvia3iBhotR[0m
[0;32m[0m[0;32m+TzAHTO9SWWkgjTcir/nhBvyL2RoqkgYyP/k50bznaVOGFnFWzfl0XnrM/salfCBh[0m
[0;32m[0m[0;32m+O0/1vNaoU8elR6AtbdCFAupgQy95GuFIRVS8n/cF0QupfPjUl+kGSLzvGAc+6oNE[0m
[0;32m[0m[0;32m+alpAhKIS/+P0uODzRrS9Eq0WX1iSj6KHtQMNN4ZKsS4nsuvYCahnAc0QwQyoduAW[0m
[0;32m[0m[0;32m+iU/ynhU9WTIEe1VIoEDE79NPOI2/80RqbZqdpAKUaf0FvuqVXhEcjiJJu+d0w9YN[0m
[0;32m[0m[0;32m+b7gurd6xkaSXemW/fP4idBiNkd8aCVAdshGQYn6yh+na0Lu5IG88Z2kSIFcXDtwy[0m
[0;32m[0m[0;32m+zjcxkW86pwkO6GekEomVBNKcv0Cey2Smf8uhpZk15TSCeyFDrZBWH9OsDst/Tnhz[0m
[0;32m[0m[0;32m+pN156Huw3M3RRdEegt33fcyPykgt0HThxrEv9DwOzhs6lCQ5RNQJO7ZvZF1ZiqgT[0m
[0;32m[0m[0;32m+FOJ6vs1xMqECAwEAAaOCAfQwggHwMA8GA1UdEwEB/wQFMAMBAf8wHwYDVR0jBBgw[0m
[0;32m[0m[0;32m+FoAUUtiIOsifeGbtifN7OHCUyQICNtAwQQYIKwYBBQUHAQEENTAzMDEGCCsGAQUF[0m
[0;32m[0m[0;32m+BzABhiVodHRwOi8vb2NzcDA1LmFjdGFsaXMuaXQvVkEvQVVUSC1ST09UMEUGA1Ud[0m
[0;32m[0m[0;32m+IAQ+MDwwOgYEVR0gADAyMDAGCCsGAQUFBwIBFiRodHRwczovL3d3dy5hY3RhbGlz[0m
[0;32m[0m[0;32m+Lml0L2FyZWEtZG93bmxvYWQwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMB[0m
[0;32m[0m[0;32m+MIHjBgNVHR8EgdswgdgwgZaggZOggZCGgY1sZGFwOi8vbGRhcDA1LmFjdGFsaXMu[0m
[0;32m[0m[0;32m+aXQvY24lM2RBY3RhbGlzJTIwQXV0aGVudGljYXRpb24lMjBSb290JTIwQ0EsbyUz[0m
[0;32m[0m[0;32m+ZEFjdGFsaXMlMjBTLnAuQS4lMmYwMzM1ODUyMDk2NyxjJTNkSVQ/Y2VydGlmaWNh[0m
[0;32m[0m[0;32m+dGVSZXZvY2F0aW9uTGlzdDtiaW5hcnkwPaA7oDmGN2h0dHA6Ly9jcmwwNS5hY3Rh[0m
[0;32m[0m[0;32m+bGlzLml0L1JlcG9zaXRvcnkvQVVUSC1ST09UL2dldExhc3RDUkwwHQYDVR0OBBYE[0m
[0;32m[0m[0;32m+FJ+KsbXxsd6C9Cd8vojN3qlDgaNLMA4GA1UdDwEB/wQEAwIBBjANBgkqhkiG9w0B[0m
[0;32m[0m[0;32m+AQsFAAOCAgEAJbygMnKJ5M6byr5Ectq05ODqwNMtky8TEF3O55g6RHhxblf6OegZ[0m
[0;32m[0m[0;32m+4ui4+ElHNOIXjycbeuUGuFA4LScCC9fnI1Rnn8TI2Q7OP5YWifEfnrdp99t/tJzQ[0m
[0;32m[0m[0;32m+hfdi7ZTdRRZZGV9x+grfR/RtjT2C3Lt9X4lcbuSxTea3PHAwwi0A3bYRR1L5ciPm[0m
[0;32m[0m[0;32m+eAnYtG9kpat8/RuC22oxiZZ5FdjU6wrRWkASRLiIwNcFIYfvpUbMWElaCUhqaB2y[0m
[0;32m[0m[0;32m+YvWF8o02pnaYb4bvTCg4cVabVnojUuuXH81LeQhhsSXLwcdwSdew0NL4zCiNCn2Q[0m
[0;32m[0m[0;32m+iDZpz2biCWDggibmWxsUUF6AbqMHnwsdS8vsKXiFQJHeAdNAhA+kwpqYAdhUiCdj[0m
[0;32m[0m[0;32m+RTUdtRNUucLvZEN1OAvVYyog9xYCfhtkqgXQROMANP+Z/+yaZahaP/Vgak/V00se[0m
[0;32m[0m[0;32m+Hdh7F+B6h5HVdwdh+17E2jl+aMTfyvBFcg2H/9Qjyl4TY8NW/6v0DPK52sVt8a35[0m
[0;32m[0m[0;32m+I+7xLGLPohAl4z6pEf2OxgjMNfXXCXS33smRgz1dLQFo8UpAb3rf84zkXaqEI6Qi[0m
[0;32m[0m[0;32m+2P+5pibVFQigRbn4RcE+K2a/nm2M/o+WZTSio+E+YXacnNk71VcO82biOof+jBKT[0m
[0;32m[0m[0;32m+iC3Xi7rAlypmme+QFBw9F1J89ig3smV/HaN8tO0lfTpvm7Zvzd5TkMs=[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m[0m[0;32m+-----BEGIN CERTIFICATE-----[0m
[0;32m[0m[0;32m+MIIFuzCCA6OgAwIBAgIIVwoRl0LE48wwDQYJKoZIhvcNAQELBQAwazELMAkGA1UE[0m
[0;32m[0m[0;32m+BhMCSVQxDjAMBgNVBAcMBU1pbGFuMSMwIQYDVQQKDBpBY3RhbGlzIFMucC5BLi8w[0m
[0;32m[0m[0;32m+MzM1ODUyMDk2NzEnMCUGA1UEAwweQWN0YWxpcyBBdXRoZW50aWNhdGlvbiBSb290[0m
[0;32m[0m[0;32m+IENBMB4XDTExMDkyMjExMjIwMloXDTMwMDkyMjExMjIwMlowazELMAkGA1UEBhMC[0m
[0;32m[0m[0;32m+SVQxDjAMBgNVBAcMBU1pbGFuMSMwIQYDVQQKDBpBY3RhbGlzIFMucC5BLi8wMzM1[0m
[0;32m[0m[0;32m+ODUyMDk2NzEnMCUGA1UEAwweQWN0YWxpcyBBdXRoZW50aWNhdGlvbiBSb290IENB[0m
[0;32m[0m[0;32m+MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAp8bEpSmkLO/lGMWwUKNv[0m
[0;32m[0m[0;32m+UTufClrJwkg4CsIcoBh/kbWHuUA/3R1oHwiD1S0eiKD4j1aPbZkCkpAW1V8IbInX[0m
[0;32m[0m[0;32m+4ay8IMKx4INRimlNAJZaby/ARH6jDuSRzVju3PvHHkVH3Se5CAGfpiEd9UEtL0z9[0m
[0;32m[0m[0;32m+KK3giq0itFZljoZUj5NDKd45RnijMCO6zfB9E1fAXdKDa0hMxKufgFpbOr3JpyI/[0m
[0;32m[0m[0;32m+gCczWw63igxdBzcIy2zSekciRDXFzMwujt0q7bd9Zg1fYVEiVRvjRuPjPdA1Yprb[0m
[0;32m[0m[0;32m+rxTIW6HMiRvhMCb8oJsfgadHHwTrozmSBp+Z07/T6k9QnBn+locePGX2oxgkg4YQ[0m
[0;32m[0m[0;32m+51Q+qDp2JE+BIcXjDwL4k5RHILv+1A7TaLndxHqEguNTVHnd25zS8gebLra8Pu2F[0m
[0;32m[0m[0;32m+be8lEfKXGkJh90qX6IuxEAf6ZYGyojnP9zz/GPvG8VqLWeICrHuS0E4UT1lF9gxe[0m
[0;32m[0m[0;32m+KF+w6D9Fz8+vm2/7hNN3WpVvrJSEnu68wEqPSpP4RCHiMUVhUE4Q2OM1fEwZtN4F[0m
[0;32m[0m[0;32m+v6MGn8i1zeQf1xcGDXqVdFUNaBr8EBtiZJ1t4JWgw5QHVw0U5r0F+7if5t+L4sbn[0m
[0;32m[0m[0;32m+fpb2U8WANFAoWPASUHEXMLrmeGO89LKtmyuy/uE5jF66CyCU3nuDuP/jVo23Eek7[0m
[0;32m[0m[0;32m+jPKxwV2dpAtMK9myGPW1n0sCAwEAAaNjMGEwHQYDVR0OBBYEFFLYiDrIn3hm7Ynz[0m
[0;32m[0m[0;32m+ezhwlMkCAjbQMA8GA1UdEwEB/wQFMAMBAf8wHwYDVR0jBBgwFoAUUtiIOsifeGbt[0m
[0;32m[0m[0;32m+ifN7OHCUyQICNtAwDgYDVR0PAQH/BAQDAgEGMA0GCSqGSIb3DQEBCwUAA4ICAQAL[0m
[0;32m[0m[0;32m+e3KHwGCmSUyIWOYdiPcUZEim2FgKDk8TNd81HdTtBjHIgT5q1d07GjLukD0R0i70[0m
[0;32m[0m[0;32m+jsNjLiNmsGe+b7bAEzlgqqI0JZN1Ut6nna0Oh4lScWoWPBkdg/iaKWW+9D+a2fDz[0m
[0;32m[0m[0;32m+WochcYBNy+A4mz+7+uAwTc+G02UQGRjRlwKxK3JCaKygvU5a2hi/a5iB0P2avl4V[0m
[0;32m[0m[0;32m+SM0RFbnAKVy06Ij3Pjaut2L9HmLecHgQHEhb2rykOLpn7VU+Xlff1ANATIGk0k9j[0m
[0;32m[0m[0;32m+pwlCCRT8AKnCgHNPLsBA2RF7SOp6AsDT6ygBJlh0wcBzIm2Tlf05fbsq4/aC4yyX[0m
[0;32m[0m[0;32m+X04fkZT6/iyj2HYauE2yOE+b+h1IYHkm4vP9qdCa6HCPSXrW5b0KDtst842/6+Ok[0m
[0;32m[0m[0;32m+fcvHlXHo2qN8xcL4dJIEG4aspCJTQLas/kx2z/uUMsA1n3Y/buWQbqCmJqK4LL7R[0m
[0;32m[0m[0;32m+K4X9p2jIugErsWx0Hbhzlefut8cl8ABMALJ+tguLHPPAUJ4lueAI3jZm/zel0btU[0m
[0;32m[0m[0;32m+ZCzJJ7VLkn5l/9Mt4blOvH+kQSGQQXemOR/qnuOf0GZvBeyqdn6/axag67XH/JJU[0m
[0;32m[0m[0;32m+LysRJyU3eExRarDzzFhdFPFqSBX/wge2sY0PjlxQRrM9vwGYT7JZVEc+NHt4bVaT[0m
[0;32m[0m[0;32m+LnPqZih4zR0Uv6CPLy64Lo7yFIrM6bV8+2ydDKXhlg==[0m
[0;32m[0m[0;32m+-----END CERTIFICATE-----[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2025-09-09 07:09:52,007 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:52,025 p=1700635 u=root n=ansible | TASK [nginx_install : Copy SSL private key to remote server] *******************************************************************************************************************************************
2025-09-09 07:09:52,963 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/IAC/ansible-collaudo-brindisi/files/privkey.pem[0m
[0;32m[0m[0;36m@@ -0,0 +1,28 @@[0m
[0;36m[0m[0;32m+-----BEGIN PRIVATE KEY-----[0m
[0;32m[0m[0;32m+MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCryUOyTggjndW6[0m
[0;32m[0m[0;32m+KLJP5A46LFTWItgZEcAU7P0DUnd+iPnK2vk1tPU5pFZMf0Ry683Z3oAWI7GvU4Ba[0m
[0;32m[0m[0;32m+GXmhX8d0pUpES6RzUxrjhCiE/wzRE5yG81hxuKqb8SJ/QWNsrFoVB3L2xynPJE8I[0m
[0;32m[0m[0;32m+89DcuSI8oR+3i9Ebl/fC5trDZmlKSXUrayhovvS7mcUVPkde7r7zzmNMMaLgb7qi[0m
[0;32m[0m[0;32m+4oR7f2vaIvNV/BaINjvchOz6JiKS/VCH9LOsHgOSemlwhiQNduFDN6J0pEcyG45J[0m
[0;32m[0m[0;32m+Mp/94sxvIMiTi1yVvnaADqrwBVvpJgNNW3tHyporJT/wjWcUb1be5jJAhUfjF7GC[0m
[0;32m[0m[0;32m+bnPd4/7HAgMBAAECggEAJ9VM/cDrUTrtjrOWGUFT7ThPWbINss5zYEbNqmIKdExV[0m
[0;32m[0m[0;32m+w6x/4ey6eim5mxZdrFoySuU1hSy0rGdr2TiUBA/eA5W6QVja4qTwFLaV4LT1Z1up[0m
[0;32m[0m[0;32m+TX+K0B/Wa79/1Ms4P0A9ySeHiGKJNs+ABh7nHO9O2Ykw/hINJF1aJZb7Phj2rDM3[0m
[0;32m[0m[0;32m+2lWELr5E2ROMyapM/ixTyRsISxYl81cR62GZ7Z0VUXjFOFwEtWiX7AGOdytygIxN[0m
[0;32m[0m[0;32m+h5ud9a6U/3JDwc7IFKHIBBIsuX3qiLzlLMUW1mFTZdorAlGcZv3fzbOh96x2TcXA[0m
[0;32m[0m[0;32m+ocvHfbC8BhdXw+POv0352glh0ynAKl8C3XP4zmo5JQKBgQDg8Uu6FDZMM7iFKChd[0m
[0;32m[0m[0;32m+QNi0a60Dj0Jyi1feYwWk0fBPAzIs2QhQiIUdcbUSZAtjqRgPmt7rs2drRTnmpatD[0m
[0;32m[0m[0;32m+ywzdk1vhRFP0DfjmoVtmaQYmnSawFYI2S9kI19zqF14k27IaDa51v975oG99iOly[0m
[0;32m[0m[0;32m+0JRGtQwMBwHoY1Xg4s1LUWnsSwKBgQDDgSF8ZGl3aRZO9SDJM27YbtStCKhzrs5f[0m
[0;32m[0m[0;32m+sOp0asyTjWXcMSQruXkEIJ05RhiPscbC1d5skZCJbSDr173TtevCeod8bdU7EM5I[0m
[0;32m[0m[0;32m+g+DmsPvIaRNtCuQz3WL1q5Ky9+3O+4cXhhocgmZJnG8pCPtMW/eMDHOz6lxtkmLB[0m
[0;32m[0m[0;32m+6uiW5E+x9QKBgAugDNTaFJBNn/ypvaRMJKb2ZaOodLusvebNYU5KV0wOEzrEIKzg[0m
[0;32m[0m[0;32m+0VhbNwtzRi9pXsf3rguqYu7lTf/AkiBXzxtocTgsKtaTHkj1D980EFBQkN5Kzkb2[0m
[0;32m[0m[0;32m+FophdZZXjNME06iLCnglaWWnR/vJ5p67bt5UnwHEHvIeqCKONiPtWjcPAoGBAIU8[0m
[0;32m[0m[0;32m+5A1agWYYAFQfSxDUNJ7cKaUjWWo9n/gnIiHlBzcoDltaQkRqSsc9UulNlD+Z8NOn[0m
[0;32m[0m[0;32m+3cYwDkkaTm1swroeKWaJCv0J/WAbu/o/pm6R/4Y91jdiTNPr9R1oqLm/rhp54T9u[0m
[0;32m[0m[0;32m+7Syw0fUo37kfneQUaUjQ06mx9vvV3+g4p/rt7kJhAoGANzNm2MlcOfkVbpopcomi[0m
[0;32m[0m[0;32m+Aba//7FZKquoMSKKJbkgb0UTJ5M1+WzgPrDW0I48gXuCRXw9RMzWORGNQkac6r3A[0m
[0;32m[0m[0;32m+KFluzkVEOkR1ziWY/zxSPiw6Zbya465ZHRLU9yUUdcX4cmkbyYGL3ww4pgGj7L2f[0m
[0;32m[0m[0;32m+8AyPVPgQ4IOFhrUT/71qDRc=[0m
[0;32m[0m[0;32m+-----END PRIVATE KEY-----[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2025-09-09 07:09:52,964 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:52,976 p=1700635 u=root n=ansible | TASK [nginx_install : Create Nginx conf.d directory] ***************************************************************************************************************************************************
2025-09-09 07:09:53,281 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 07:09:53,294 p=1700635 u=root n=ansible | TASK [nginx_install : Create Nginx conf-http.d directory] **********************************************************************************************************************************************
2025-09-09 07:09:53,606 p=1700635 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/etc/nginx/conf-http.d",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-09-09 07:09:53,606 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:53,620 p=1700635 u=root n=ansible | TASK [nginx_install : Backup original nginx.conf] ******************************************************************************************************************************************************
2025-09-09 07:09:53,935 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:53,950 p=1700635 u=root n=ansible | TASK [nginx_install : Deploy Nginx configuration from template] ****************************************************************************************************************************************
2025-09-09 07:09:55,160 p=1700635 u=root n=ansible | [0;31m--- before: /etc/nginx/nginx.conf[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-17006354f7crdsh/tmp3atrmczw/nginx.conf.j2[0m
[0;32m[0m[0;36m@@ -1,85 +1,87 @@[0m
[0;36m[0m[0;32m+#load_module /usr/lib/nginx/modules/ngx_stream_module.so;[0m
[0;32m[0m user www-data;
[0;31m-worker_processes auto;[0m
[0;31m[0m[0;32m+worker_processes 2;[0m
[0;32m[0m[0;32m+worker_rlimit_nofile 40000;[0m
[0;32m[0m[0;32m+error_log /var/log/nginx/error.log;[0m
[0;32m[0m pid /run/nginx.pid;
[0;31m-include /etc/nginx/modules-enabled/*.conf;[0m
[0;31m[0m[0;32m+#include /etc/nginx/modules-enabled/*.conf;[0m
[0;32m[0m[0;32m+include /etc/nginx/conf.d/*.conf;[0m
[0;32m[0m 
 events {
[0;31m-	worker_connections 768;[0m
[0;31m[0m[0;31m-	# multi_accept on;[0m
[0;31m[0m[0;32m+    worker_connections 1024;[0m
[0;32m[0m[0;32m+    use epoll;[0m
[0;32m[0m[0;32m+    multi_accept on;[0m
[0;32m[0m }
 
 http {
[0;32m+    client_max_body_size 2G;[0m
[0;32m[0m 
[0;31m-	##[0m
[0;31m[0m[0;31m-	# Basic Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;32m+    upstream rancher_servers_https {[0m
[0;32m[0m[0;32m+        server 10.116.82.131:443 max_fails=3 fail_timeout=5s;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m 
[0;31m-	sendfile on;[0m
[0;31m[0m[0;31m-	tcp_nopush on;[0m
[0;31m[0m[0;31m-	tcp_nodelay on;[0m
[0;31m[0m[0;31m-	keepalive_timeout 65;[0m
[0;31m[0m[0;31m-	types_hash_max_size 2048;[0m
[0;31m[0m[0;31m-	# server_tokens off;[0m
[0;31m[0m 
[0;31m-	# server_names_hash_bucket_size 64;[0m
[0;31m[0m[0;31m-	# server_name_in_redirect off;[0m
[0;31m[0m[0;32m+    upstream rancher_ingress_https {[0m
[0;32m[0m[0;32m+        server 10.116.82.140:443 max_fails=3 fail_timeout=5s;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m 
[0;31m-	include /etc/nginx/mime.types;[0m
[0;31m[0m[0;31m-	default_type application/octet-stream;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# SSL Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE[0m
[0;31m[0m[0;31m-	ssl_prefer_server_ciphers on;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Logging Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	access_log /var/log/nginx/access.log;[0m
[0;31m[0m[0;31m-	error_log /var/log/nginx/error.log;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Gzip Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	gzip on;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# gzip_vary on;[0m
[0;31m[0m[0;31m-	# gzip_proxied any;[0m
[0;31m[0m[0;31m-	# gzip_comp_level 6;[0m
[0;31m[0m[0;31m-	# gzip_buffers 16 8k;[0m
[0;31m[0m[0;31m-	# gzip_http_version 1.1;[0m
[0;31m[0m[0;31m-	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Virtual Host Configs[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	include /etc/nginx/conf.d/*.conf;[0m
[0;31m[0m[0;31m-	include /etc/nginx/sites-enabled/*;[0m
[0;31m[0m[0;32m+upstream rancher_ingress_https_1 {[0m
[0;32m[0m[0;32m+    server 10.116.82.141:443 max_fails=3 fail_timeout=5s;[0m
[0;32m[0m }
 
 
[0;31m-#mail {[0m
[0;31m[0m[0;31m-#	# See sample authentication script at:[0m
[0;31m[0m[0;31m-#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript[0m
[0;31m[0m[0;31m-# [0m
[0;31m[0m[0;31m-#	# auth_http localhost/auth.php;[0m
[0;31m[0m[0;31m-#	# pop3_capabilities "TOP" "USER";[0m
[0;31m[0m[0;31m-#	# imap_capabilities "IMAP4rev1" "UIDPLUS";[0m
[0;31m[0m[0;31m-# [0m
[0;31m[0m[0;31m-#	server {[0m
[0;31m[0m[0;31m-#		listen     localhost:110;[0m
[0;31m[0m[0;31m-#		protocol   pop3;[0m
[0;31m[0m[0;31m-#		proxy      on;[0m
[0;31m[0m[0;31m-#	}[0m
[0;31m[0m[0;31m-# [0m
[0;31m[0m[0;31m-#	server {[0m
[0;31m[0m[0;31m-#		listen     localhost:143;[0m
[0;31m[0m[0;31m-#		protocol   imap;[0m
[0;31m[0m[0;31m-#		proxy      on;[0m
[0;31m[0m[0;31m-#	}[0m
[0;31m[0m[0;31m-#}[0m
[0;31m[0m[0;32m+    # Redirezione HTTP a HTTPS[0m
[0;32m[0m[0;32m+    server {[0m
[0;32m[0m[0;32m+        listen 80 default_server;[0m
[0;32m[0m[0;32m+        server_name _;[0m
[0;32m[0m[0;32m+        return 301 https://$host$request_uri;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    # Blocco Rancher[0m
[0;32m[0m[0;32m+    server {[0m
[0;32m[0m[0;32m+        listen 443 ssl;[0m
[0;32m[0m[0;32m+        server_name rancher.asl.brindisi.it;[0m
[0;32m[0m[0;32m+        ssl_certificate /etc/nginx/cert/fullchain.pem;[0m
[0;32m[0m[0;32m+        ssl_certificate_key /etc/nginx/cert/privkey.pem;[0m
[0;32m[0m[0;32m+        ssl_protocols TLSv1.2 TLSv1.3;[0m
[0;32m[0m[0;32m+        ssl_ciphers HIGH:!aNULL:!MD5;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+        location / {[0m
[0;32m[0m[0;32m+            proxy_pass https://rancher_servers_https;[0m
[0;32m[0m[0;32m+            proxy_set_header Host $host;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Real-IP $remote_addr;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Forwarded-Proto $scheme;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Forwarded-Host $host;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Forwarded-Port $server_port;[0m
[0;32m[0m[0;32m+            proxy_http_version 1.1;[0m
[0;32m[0m[0;32m+            proxy_set_header Upgrade $http_upgrade;[0m
[0;32m[0m[0;32m+            proxy_set_header Connection "Upgrade";[0m
[0;32m[0m[0;32m+            proxy_ssl_server_name on;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    # Blocco Multi-Servizi[0m
[0;32m[0m[0;32m+    server {[0m
[0;32m[0m[0;32m+        listen 443 ssl;[0m
[0;32m[0m[0;32m+        server_name kibana-coll.asl.brindisi.it grafana-coll.asl.brindisi.it harbor-coll.asl.brindisi.it pgadmin-coll.asl.brindisi.it kafkaui-coll.asl.brindisi.it ;[0m
[0;32m[0m[0;32m+        ssl_certificate /etc/nginx/cert/fullchain.pem;[0m
[0;32m[0m[0;32m+        ssl_certificate_key /etc/nginx/cert/privkey.pem;[0m
[0;32m[0m[0;32m+        ssl_protocols TLSv1.2 TLSv1.3;[0m
[0;32m[0m[0;32m+        ssl_ciphers HIGH:!aNULL:!MD5;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+        location / {[0m
[0;32m[0m[0;32m+            proxy_pass https://rancher_ingress_https;[0m
[0;32m[0m[0;32m+            proxy_set_header Host $host;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Real-IP $remote_addr;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Forwarded-Proto $scheme;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Forwarded-Host $host;[0m
[0;32m[0m[0;32m+            proxy_set_header X-Forwarded-Port $server_port;[0m
[0;32m[0m[0;32m+            proxy_ssl_server_name on;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+include /etc/nginx/conf-http.d/*.conf;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2025-09-09 07:09:55,160 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:55,175 p=1700635 u=root n=ansible | TASK [nginx_install : Test Nginx configuration] ********************************************************************************************************************************************************
2025-09-09 07:09:55,506 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 07:09:55,519 p=1700635 u=root n=ansible | TASK [nginx_install : Display Nginx test result] *******************************************************************************************************************************************************
2025-09-09 07:09:55,551 p=1700635 u=root n=ansible | ok: [nginx] => {
    "nginx_test.stdout_lines": []
}
2025-09-09 07:09:55,565 p=1700635 u=root n=ansible | TASK [nginx_install : Enable and start Nginx service] **************************************************************************************************************************************************
2025-09-09 07:09:56,065 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:56,079 p=1700635 u=root n=ansible | TASK [nginx_install : Check if Nginx is running] *******************************************************************************************************************************************************
2025-09-09 07:09:56,527 p=1700635 u=root n=ansible | ok: [nginx]
2025-09-09 07:09:56,541 p=1700635 u=root n=ansible | TASK [nginx_install : Display Nginx status] ************************************************************************************************************************************************************
2025-09-09 07:09:56,571 p=1700635 u=root n=ansible | ok: [nginx] => {
    "msg": "Nginx is active"
}
2025-09-09 07:09:56,595 p=1700635 u=root n=ansible | RUNNING HANDLER [nginx_install : restart nginx] ********************************************************************************************************************************************************
2025-09-09 07:09:57,543 p=1700635 u=root n=ansible | changed: [nginx]
2025-09-09 07:09:57,562 p=1700635 u=root n=ansible | TASK [Display completion message] **********************************************************************************************************************************************************************
2025-09-09 07:09:57,653 p=1700635 u=root n=ansible | ok: [nginx] => {
    "msg": [
        "Nginx installation and configuration completed successfully!",
        "Server configured for: rancher.asl.brindisi.it",
        "SSL Certificate: /etc/nginx/cert/fullchain.pem",
        "SSL Key: /etc/nginx/cert/privkey.pem",
        "Remember to copy your SSL certificates to /etc/nginx/cert/"
    ]
}
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | PLAY RECAP *********************************************************************************************************************************************************************************************
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | cornelio.app.iac-svil.almaviva.it : ok=84   changed=39   unreachable=0    failed=0    skipped=2    rescued=0    ignored=1   
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | localhost                  : ok=11   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | nginx                      : ok=28   changed=12   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | rke2-ingress01             : ok=26   changed=11   unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | rke2-ingress02             : ok=26   changed=11   unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | rke2-manager2              : ok=68   changed=30   unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | rke2-worker1               : ok=16   changed=4    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | rke2-worker2               : ok=16   changed=4    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2025-09-09 07:09:57,667 p=1700635 u=root n=ansible | rke2-worker3               : ok=26   changed=11   unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
